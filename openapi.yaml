openapi: 3.0.1
info:
  title: B2Brouter API
  description: The B2Brouter API allows you to send and receive electronic documents.
  version: '2025-10-13'
  contact:
    name: Service Delivery Team
    email: servicedelivery@b2brouter.net
servers:
  - url: https://api-staging.b2brouter.net
    description: Test server
tags:
  - name: Accounts
    description: Related to accounts
  - name: Bank Accounts
    description: Related to bank accounts
  - name: Code lists
    description: Related our defined code lists
  - name: Contacts
    description: Related to contacts (clients and providers)
  - name: eAccounting
    description: Related to eAccounting
  - name: Events
    description: Related to events
  - name: Invoices
    description: Related to invoices
  - name: Ledgers
    description: Related to ledgers (sets of tax reports)
  - name: Lookup
    description: Related to lookup capacities of recipients
  - name: Orders
    description: Related to orders
  - name: Tax Reports
    description: Related tax reports
  - name: Tax Report Settings
    description: Related to tax report settings
  - name: Transports
    description: Related to transport configurations
  - name: Validation
    description: Related to validations
paths:
  /accounts:
    get:
      operationId: get-accounts
      tags:
        - Accounts
      summary: List accounts
      description: This endpoint list all accounts associated with the group.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  accounts:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/Account'
                        - $ref: '#/components/schemas/TransactionsEdocsync'
                  meta:
                    $ref: '#/components/schemas/IndexMeta'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    post:
      operationId: create-account
      tags:
        - Accounts
      summary: Create an account
      description: This endpoint creates a new account associated with the group. Only available for eDocSync subscriptions.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
      requestBody:
        description: The account object in format JSON to create
        content:
          application/json:
            schema:
              type: object
              required:
                - account
              properties:
                account:
                  allOf:
                    - $ref: '#/components/schemas/Account'
                    - $ref: '#/components/schemas/TransactionsEdocsync'
                    - required:
                        - name
                        - postalcode
                        - email
                        - address
                        - city
                        - province
                        - phone
                        - tin_value
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  account:
                    $ref: '#/components/schemas/Account'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /accounts/{account}:
    get:
      operationId: get-account
      tags:
        - Accounts
      summary: Retrieve an account
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  account:
                    $ref: '#/components/schemas/Account'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    put:
      operationId: put-account
      tags:
        - Accounts
      summary: Update an account
      description: |
        This endpoint updates an account associated with a group.
        Returns the full account representation after successful update.
        Note*: The TIN can not be updated.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      requestBody:
        description: The account object in format JSON to update
        content:
          application/json:
            schema:
              type: object
              required:
                - account
              properties:
                account:
                  $ref: '#/components/schemas/Account'
      responses:
        '200':
          description: Successful operation - returns full account representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  account:
                    $ref: '#/components/schemas/Account'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    delete:
      operationId: delete-account
      tags:
        - Accounts
      summary: Archive/Delete an account
      description: |
        Archives an account or permanently deletes it if it's destroyable.
        Returns the full account representation with updated status.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      responses:
        '200':
          description: Account archived/deleted successfully - returns full account representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  account:
                    $ref: '#/components/schemas/AccountDeleted'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Conflict - account cannot be deleted (archived or main account)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /accounts/{account}/unarchive:
    post:
      operationId: unarchive-account
      tags:
        - Accounts
      summary: Unarchive an account
      description: |
        This endpoint unarchives an account associated with a group.
        Returns the full account representation after successful unarchive.
        Only available for eDocSync subscriptions.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      responses:
        '200':
          description: Account unarchived successfully - returns full account representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  account:
                    $ref: '#/components/schemas/Account'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Conflict - account cannot be unarchived because it's already unarchived
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /accounts/{account}/logo:
    post:
      operationId: upload-account-logo
      tags:
        - Accounts
      summary: Upload an account logo
      description: |
        Uploads a logo file for the specified account. If a logo already exists, it will be replaced.
        The logo will be displayed automatically in all generated PDF invoices for this account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      requestBody:
        description: The logo attachment to add to the account
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
      responses:
        '200':
          description: Successful operation - returns full account representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  account:
                    $ref: '#/components/schemas/Account'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    delete:
      operationId: delete-account-logo
      tags:
        - Accounts
      summary: Deletes account logo
      description: Deletes the uploaded logo for the specified account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      responses:
        '200':
          description: Successful operation - returns full account representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  account:
                    $ref: '#/components/schemas/Account'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /accounts/{account}/bank_accounts:
    get:
      operationId: get-bank-accounts
      tags:
        - Bank Accounts
      summary: List bank accounts
      description: Returns an array of the bank accounts of the account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  bank_accounts:
                    type: array
                    items:
                      $ref: '#/components/schemas/BankAccount'
                  meta:
                    $ref: '#/components/schemas/IndexMeta'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    post:
      operationId: create-bank-account
      tags:
        - Bank Accounts
      summary: Create a bank account
      description: Creates a new bank account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      requestBody:
        description: Bank account object in format JSON to create
        content:
          application/json:
            schema:
              type: object
              required:
                - bank_account
              properties:
                bank_account:
                  $ref: '#/components/schemas/BankAccount'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  bank_account:
                    $ref: '#/components/schemas/BankAccount'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /bank_accounts/{id}:
    get:
      operationId: get-bank-account
      tags:
        - Bank Accounts
      summary: Get a bank account
      description: Returns a bank account entity
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - name: id
          in: path
          required: true
          description: Bank account identifier
          schema:
            type: integer
      responses:
        '200':
          description: Returns a bank account
          content:
            application/json:
              schema:
                type: object
                properties:
                  bank_account:
                    $ref: '#/components/schemas/BankAccount'
        '404':
          description: Bank account not found
      security:
        - api_key: []
    put:
      operationId: put-bank-account
      tags:
        - Bank Accounts
      summary: Update a bank account
      description: Updates a bank account and returns the full bank account representation
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - name: id
          in: path
          required: true
          description: Bank account identifier
          schema:
            type: integer
      requestBody:
        description: The Bank Account object in format JSON to update
        content:
          application/json:
            schema:
              type: object
              properties:
                bank_account:
                  $ref: '#/components/schemas/BankAccount'
      responses:
        '200':
          description: Bank account updated successfully - returns full bank account representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  bank_account:
                    $ref: '#/components/schemas/BankAccount'
        '422':
          description: The bank account has not been updated due to validation errors
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - api_key: []
    delete:
      operationId: delete-bank-account
      tags:
        - Bank Accounts
      summary: Delete a bank account
      description: Deletes a bank account and returns the full bank account representation
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - name: id
          in: path
          required: true
          description: Bank account identifier
          schema:
            type: integer
      responses:
        '200':
          description: Bank account deleted successfully - returns full bank account representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  bank_account:
                    $ref: '#/components/schemas/BankAccount'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Bank account not found
        '422':
          description: Unable to delete bank account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - api_key: []
  /accounts/{account}/eaccounting/connected_accounts:
    get:
      operationId: get-connected-accounts
      tags:
        - eAccounting
      summary: List connected accounts
      description: This endpoint list all connected client accounts associated through eAccounting connection with your account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  accounts:
                    type: array
                    items:
                      $ref: '#/components/schemas/Account'
                  meta:
                    $ref: '#/components/schemas/IndexMeta'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /accounts/{account}/tax_report_settings:
    get:
      operationId: get-tax-report-settings
      tags:
        - Tax Report Settings
      summary: List tax report settings
      description: This endpoint list all tax report settings this account has configured.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report_settings:
                    type: array
                    items:
                      anyOf:
                        - $ref: '#/components/schemas/TbaiTaxReportSetting'
                        - $ref: '#/components/schemas/SdiTaxReportSetting'
                  total_count:
                    type: integer
                    example: 1
                  offset:
                    type: integer
                    example: 0
                  limit:
                    type: integer
                    example: 25
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    post:
      operationId: create-tax-report-setting
      tags:
        - Tax Report Settings
      summary: Create a tax report setting
      description: This endpoint creates a new tax report setting associated with the group.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      requestBody:
        description: The tax report setting object in format JSON to create
        content:
          application/json:
            schema:
              type: object
              required:
                - tax_report_setting
              properties:
                tax_report_setting:
                  oneOf:
                    - allOf:
                        - $ref: '#/components/schemas/VerifactuTaxReportSetting'
                        - required:
                            - code
                            - reason_vat_exempt
                            - special_regime_key
                            - special_regime_key_igic
                            - reason_no_subject
                            - credit_note_code
                    - allOf:
                        - $ref: '#/components/schemas/TbaiTaxReportSetting'
                        - required:
                            - code
                            - delegation
                            - reason_vat_exempt
                            - special_regime_key
                            - reason_no_subject
                            - credit_note_code
                            - type_operation
                    - allOf:
                        - $ref: '#/components/schemas/SdiTaxReportSetting'
                        - required:
                            - code
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report_setting:
                    anyOf:
                      - $ref: '#/components/schemas/VerifactuTaxReportSetting'
                      - $ref: '#/components/schemas/TbaiTaxReportSetting'
                      - $ref: '#/components/schemas/SdiTaxReportSetting'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /accounts/{account}/tax_report_settings/{code}:
    get:
      operationId: get-tax-report-setting
      tags:
        - Tax Report Settings
      summary: Retrieve a tax report setting
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/tax_authority_code'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report_setting:
                    anyOf:
                      - $ref: '#/components/schemas/VerifactuTaxReportSetting'
                      - $ref: '#/components/schemas/TbaiTaxReportSetting'
                      - $ref: '#/components/schemas/SdiTaxReportSetting'
                      - $ref: '#/components/schemas/LhdnTaxReportSetting'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    put:
      operationId: put-tax-report-setting
      tags:
        - Tax Report Settings
      summary: Update a tax report setting
      description: |
        This endpoint updates a tax report setting associated with an account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/tax_authority_code'
      requestBody:
        description: The tax report setting object in format JSON to update
        content:
          application/json:
            schema:
              type: object
              required:
                - tax_report_setting
              properties:
                tax_report_setting:
                  anyOf:
                    - $ref: '#/components/schemas/VerifactuTaxReportSetting'
                    - $ref: '#/components/schemas/TbaiTaxReportSetting'
                    - $ref: '#/components/schemas/SdiTaxReportSetting'
                    - $ref: '#/components/schemas/LhdnTaxReportSetting'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report_setting:
                    oneOf:
                      - $ref: '#/components/schemas/VerifactuTaxReportSetting'
                      - $ref: '#/components/schemas/TbaiTaxReportSetting'
                      - $ref: '#/components/schemas/SdiTaxReportSetting'
                      - $ref: '#/components/schemas/LhdnTaxReportSetting'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    delete:
      operationId: delete-tax-report-setting
      tags:
        - Tax Report Settings
      summary: Delete a tax report setting
      description: This endpoint deletes a tax report setting associated with an account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/tax_authority_code'
      responses:
        '200':
          description: Successful operation - returns full tax report setting representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report_setting:
                    oneOf:
                      - $ref: '#/components/schemas/VerifactuTaxReportSetting'
                      - $ref: '#/components/schemas/TbaiTaxReportSetting'
                      - $ref: '#/components/schemas/SdiTaxReportSetting'
                      - $ref: '#/components/schemas/LhdnTaxReportSetting'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /invoices/{id}:
    get:
      operationId: get-invoice
      tags:
        - Invoices
      summary: Get an invoice
      description: Returns information about a specific invoice, it can be an **issued invoice** or a **received invoice**.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
        - $ref: '#/components/parameters/include'
        - $ref: '#/components/parameters/disposition'
        - $ref: '#/components/parameters/ack'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  invoice:
                    $ref: '#/components/schemas/InvoiceResponse'
        '302':
          description: |-
            Found. This response indicates that the requested invoice is a **received invoice**.  
               The response includes a `Location` header with the URL where the full invoice details can be obtained.
          headers:
            Location:
              description: URL of the resource to which the request is redirected
              schema:
                type: string
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Invoice not found
      security:
        - api_key: []
    put:
      operationId: put-invoice
      tags:
        - Invoices
      summary: Update an invoice
      description: Update a specific invoice.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
      requestBody:
        description: The Invoice object in format JSON to update
        content:
          application/json:
            schema:
              type: object
              properties:
                invoice:
                  $ref: '#/components/schemas/InvoiceUpdate'
      responses:
        '200':
          description: Successful update - returns full invoice representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  invoice:
                    $ref: '#/components/schemas/InvoiceResponse'
        '400':
          description: Invalid status value
        '422':
          description: Unprocessable Entity
      security:
        - api_key: []
    delete:
      operationId: delete-invoice
      tags:
        - Invoices
      summary: Delete an invoice
      description: Delete a specific invoice.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
      responses:
        '200':
          description: Invoice deleted successfully - returns full invoice representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  invoice:
                    $ref: '#/components/schemas/InvoiceResponse'
        '404':
          description: Invoice not found
        '422':
          description: Unprocessable Entity
      security:
        - api_key: []
  /invoices/{id}/as/{document_type_code}:
    get:
      operationId: get-invoice-with-document-type
      tags:
        - Invoices
      summary: Get an invoice with a specific document type
      description: |
        Returns the specified invoice with the indicated document type.<br> It can be an **issued invoice** or a **received invoice**.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
        - $ref: '#/components/parameters/document_type_code'
      responses:
        '200':
          description: Successful operation
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Invoice not found
      security:
        - api_key: []
  /accounts/{account}/invoices:
    get:
      operationId: get-invoices
      tags:
        - Invoices
      summary: List of invoices
      description: Returns a paginated list of the invoices of the account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/type'
        - $ref: '#/components/parameters/ack_filter'
        - $ref: '#/components/parameters/date_from'
        - $ref: '#/components/parameters/date_to'
        - $ref: '#/components/parameters/due_date_from'
        - $ref: '#/components/parameters/due_date_to'
        - $ref: '#/components/parameters/number'
        - $ref: '#/components/parameters/state_updated_at_from'
        - $ref: '#/components/parameters/updated_at_from'
        - $ref: '#/components/parameters/taxcode'
        - $ref: '#/components/parameters/new'
        - $ref: '#/components/parameters/sending'
        - $ref: '#/components/parameters/error'
        - $ref: '#/components/parameters/sent'
        - $ref: '#/components/parameters/refused'
        - $ref: '#/components/parameters/closed'
        - $ref: '#/components/parameters/registered'
        - $ref: '#/components/parameters/accepted'
        - $ref: '#/components/parameters/allegedly_paid'
        - $ref: '#/components/parameters/received_invoice_received'
        - $ref: '#/components/parameters/received_invoice_paid'
        - $ref: '#/components/parameters/received_invoice_ocr_failed'
        - $ref: '#/components/parameters/received_invoice_exclude_offices'
        - $ref: '#/components/parameters/from_net'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  invoices:
                    type: array
                    items:
                      $ref: '#/components/schemas/InvoiceReduced'
                  meta:
                    $ref: '#/components/schemas/IndexMeta'
      security:
        - api_key: []
    post:
      operationId: create-invoice
      tags:
        - Invoices
      summary: Create an invoice
      description: Create an invoice
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      requestBody:
        description: The Invoice object in format JSON to create
        content:
          application/json:
            schema:
              type: object
              required:
                - invoice
              properties:
                send_after_import:
                  $ref: '#/components/schemas/SendAfterImport'
                ack:
                  $ref: '#/components/schemas/Ack'
                invoice:
                  $ref: '#/components/schemas/Invoice'
      responses:
        '200':
          description: Successful create - returns full invoice representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  invoice:
                    $ref: '#/components/schemas/InvoiceResponse'
        '400':
          description: Invalid status value
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '422':
          description: Unprocessable Entity
      security:
        - api_key: []
  /accounts/{account}/invoices/import:
    post:
      operationId: import-invoice
      tags:
        - Invoices
      summary: Import an invoice from a file
      description: Import an invoice from a supported file.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/send_after_import'
        - $ref: '#/components/parameters/transport_type_code_for_contact'
        - $ref: '#/components/parameters/document_type_code_for_contact'
        - $ref: '#/components/parameters/issued'
        - $ref: '#/components/parameters/ack'
      requestBody:
        description: The invoice file to import
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
      responses:
        '200':
          description: Successful create - returns full invoice representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  invoice:
                    $ref: '#/components/schemas/InvoiceResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '406':
          description: Not Acceptable
      security:
        - api_key: []
  /invoices/{id}/mark_as:
    post:
      operationId: mark-as-invoice
      tags:
        - Invoices
      summary: Switch invoice state
      description: Switch the state of an existing invoice.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
      requestBody:
        description: Attributes to update the state of the invoice
        content:
          application/json:
            schema:
              type: object
              required:
                - state
              properties:
                state:
                  $ref: '#/components/schemas/StateInput'
                commit:
                  $ref: '#/components/schemas/InvoiceMarkAsCommit'
                reason:
                  $ref: '#/components/schemas/InvoiceMarkAsReason'
      responses:
        '200':
          description: State successfully switched - returns full invoice representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  invoice:
                    $ref: '#/components/schemas/InvoiceResponse'
        '401':
          description: ' Unauthorized'
        '404':
          description: ' Invoice not found'
        '422':
          description: ' Unprocessable Entity'
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: array
                    items:
                      $ref: '#/components/schemas/ErrorItem'
      security:
        - api_key: []
  /invoices/{id}/add_attachment:
    post:
      operationId: add-attachment-invoice
      tags:
        - Invoices
      summary: Add attachment
      description: Adds an attachment to an existing invoice. Do not confuse with add_attachments method (note plural)
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
        - $ref: '#/components/parameters/filename'
        - $ref: '#/components/parameters/use_as_pdf_view'
      requestBody:
        description: The attachment to add to the invoice
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
      responses:
        '204':
          description: Attachment successfully added
      security:
        - api_key: []
  /invoices/{id}/add_attachments:
    post:
      operationId: add-attachments-invoice
      tags:
        - Invoices
      summary: Add attachments
      description: Adds attachments to an existing invoice. Expects a multipart POST request, attachments must be compressed in a zip file.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                attachments:
                  description: A zip file containing the attachments to add to the invoice.
                  type: string
                  format: binary
      responses:
        '201':
          description: Attachments successfully added
          content:
            application/json:
              schema:
                type: object
                properties:
                  saved_attachments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Attachment'
                  errors:
                    type: array
                    items: {}
        '422':
          description: Errors adding attachments
          content:
            application/json:
              schema:
                type: object
                properties:
                  saved_attachments:
                    type: array
                    items: {}
                  errors:
                    type: array
                    items:
                      $ref: '#/components/schemas/ErrorMessage'
      security:
        - api_key: []
  /invoices/{id}/generate_tax_report:
    post:
      operationId: generate-tax-report-from-invoice
      tags:
        - Invoices
      summary: Generate a tax report from an Invoice
      description: |-
        Generates the tax report for an existing invoice. Depending on the Tax Authority and the settings of your account, the tax report might be automatically send after issuing an invoice. Thus, it might not be necessary to explicitly call this method if you issue your invoices via B2Brouter.
        Note that you will have to check the status of the tax report we send in your behalf in order to be able to take the necessary actions in case any error or warning is issued by the Tax Authority. Because of the asynchronous nature of the tax report sending process, there is no guarantee that when you check the status of the tax reports it will already have the response of the Tax Authority. It usually takes a few seconds to complete the transaction. You will know that the transaction is complete if the response of the check of the status of the tax report has an status **registered** or **error**. We recommend you retry the status check until you get a final state on your tax report.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
      responses:
        '201':
          description: Tax report successfully created
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report:
                    $ref: '#/components/schemas/TaxReportGenerated'
      security:
        - api_key: []
  /invoices/send_invoice/{id}:
    post:
      operationId: send-invoice
      tags:
        - Invoices
      summary: Send invoice
      description: Send the invoice
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
      responses:
        '204':
          description: Invoice successfully sent
        '422':
          description: Unprocessable Entity
      security:
        - api_key: []
  /invoices/{id}/validate:
    get:
      operationId: validate
      tags:
        - Invoices
      summary: Validates an invoice
      description: |
        This endpoint validates the electronic invoice identified by the ID specified in the request parameters.

        The validation of the e-document is performed through:

          - Checking the use of a correct syntax schema (XSD).
          - Checking the business rules depending on the document type (Schematron).
          - Checking the B2Brouter rules.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
      responses:
        '200':
          description: Validation returned correctly
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/DocumentValidation'
                  - type: object
                    properties:
                      validation_result:
                        type: object
                        properties:
                          status:
                            description: |
                              Status validation of the validated document.
                              - If xsd or sch or model are ´invalid,´ the global status will be ´invalid´.
                              - If sch is ´valid_with_warnings´, the global status will be ´valid_with_warnings´.
                              - If xsd and sch and model are ´valid´, the global status will be ´valid´.
                              - If xsd and sch are ´not_applicable´ and model is ´valid´ the global status will be ´valid´.
                              - If xsd and sch are ´not_applicable´ and model is ´invalid´ the global status will be ´invalid´.
                          xsd:
                            properties:
                              status:
                                enum:
                                  - not_applicable
                          sch:
                            properties:
                              status:
                                enum:
                                  - not_applicable
                          model:
                            type: object
                            description: Representation of the B2Brouter model validation.
                            properties:
                              status:
                                type: string
                                example: valid
                                enum:
                                  - valid
                                  - invalid
                                description: Validity status of document validation against the B2Brouter invoice model rules.
                              errors:
                                type: array
                                items:
                                  type: object
                                  description: Representation of a invoice model error
                                  properties:
                                    attribute:
                                      type: string
                                      example: contact
                                      description: Invoice field that has the error
                                    message:
                                      type: string
                                      example: Does not belong to the same project
                                      description: Description of the error encountered
                                    type:
                                      type: string
                                      example: not_same_project
                                      description: Error code associated
        '404':
          description: Invoice not found
      security:
        - api_key: []
  /invoices/{id}/ack:
    post:
      operationId: ack-invoice
      tags:
        - Invoices
      summary: Mark an invoice as acknowledged
      description: Mark an invoice as acknowledged. This will prevent the invoice from being listed when  getting the list of issued or received invoices, unless when param ack=true is given.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/invoice_id'
      responses:
        '200':
          description: Invoice acknowledged successfully - returns full invoice representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  invoice:
                    $ref: '#/components/schemas/InvoiceResponse'
      security:
        - api_key: []
  /orders/{id}.{format}:
    get:
      operationId: get-order
      tags:
        - Orders
      summary: Get an order
      description: Returns information about a specific order.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/order_id'
        - $ref: '#/components/parameters/order_format'
        - $ref: '#/components/parameters/include'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Order not found
      security:
        - api_key: []
  /accounts/{account}/orders:
    get:
      operationId: get-orders
      tags:
        - Orders
      summary: List of orders
      description: Returns a paginated list of the submitted orders of the company
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/order_number'
        - $ref: '#/components/parameters/order_filename'
        - $ref: '#/components/parameters/order_delivery_location_id'
        - $ref: '#/components/parameters/order_contact'
        - $ref: '#/components/parameters/order_sel_data'
        - $ref: '#/components/parameters/order_date_from'
        - $ref: '#/components/parameters/order_date_to'
        - $ref: '#/components/parameters/order_country'
        - $ref: '#/components/parameters/order_delivery_confirmed'
        - $ref: '#/components/parameters/order_closed'
        - $ref: '#/components/parameters/order_accepted'
        - $ref: '#/components/parameters/order_refused'
        - $ref: '#/components/parameters/order_received'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  orders:
                    type: array
                    items:
                      $ref: '#/components/schemas/Order'
                  meta:
                    $ref: '#/components/schemas/IndexMeta'
      security:
        - api_key: []
  /orders/{id}/mark_as:
    post:
      operationId: mark-as-order
      tags:
        - Orders
      summary: Switch order state
      description: Switch the state of an existing order.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/order_id'
      requestBody:
        description: Attributes to update the state of the order
        content:
          application/json:
            schema:
              type: object
              required:
                - state
              properties:
                state:
                  $ref: '#/components/schemas/OrderState'
      responses:
        '200':
          description: State successfully switched - returns full order representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  order:
                    $ref: '#/components/schemas/Order'
        '401':
          description: ' Unauthorized'
        '404':
          description: ' Order not found'
        '422':
          description: ' Unprocessable Entity'
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: array
                    items:
                      $ref: '#/components/schemas/ErrorItem'
      security:
        - api_key: []
  /contacts/{id}:
    get:
      operationId: get-contact
      tags:
        - Contacts
      summary: Get a contact (client/provider)
      description: Returns a contact entity
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - name: id
          in: path
          required: true
          description: Contact identifier
          schema:
            type: integer
      responses:
        '200':
          description: Returns a contact
          content:
            application/json:
              schema:
                type: object
                properties:
                  contact:
                    $ref: '#/components/schemas/Contact'
        '404':
          description: Contact not found
      security:
        - api_key: []
    put:
      operationId: put-contact
      tags:
        - Contacts
      summary: Update a contact
      description: Updates a contact and returns the full contact representation
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - name: id
          in: path
          required: true
          description: Contact identifier
          schema:
            type: integer
      requestBody:
        description: The Contact object in format JSON to update
        content:
          application/json:
            schema:
              type: object
              properties:
                contact:
                  $ref: '#/components/schemas/Contact'
      responses:
        '200':
          description: Contact updated successfully - returns full contact representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  contact:
                    $ref: '#/components/schemas/Contact'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    delete:
      operationId: delete-contact
      tags:
        - Contacts
      summary: Delete a contact
      description: Deletes a contact and returns the full contact representation
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - name: id
          in: path
          required: true
          description: Contact identifier
          schema:
            type: integer
      responses:
        '200':
          description: Contact deleted successfully - returns full contact representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  contact:
                    $ref: '#/components/schemas/Contact'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Contact not found
        '422':
          description: Unable to delete contact
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: array
                    items:
                      $ref: '#/components/schemas/ErrorItem'
      security:
        - api_key: []
  /accounts/{account}/contacts:
    get:
      operationId: get-contacts
      tags:
        - Contacts
      summary: List contacts
      description: Returns an array of the contacts for the specified account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - name: name
          in: query
          description: Filter by contact name
          schema:
            type: string
        - name: is_client
          in: query
          description: Filter by contacts that are clients
          schema:
            type: boolean
        - name: is_provider
          in: query
          description: Filter by contacts that are providers
          schema:
            type: boolean
        - name: integration_code
          in: query
          description: Filter by integration code
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  contacts:
                    type: array
                    items:
                      $ref: '#/components/schemas/ContactReduced'
                  meta:
                    $ref: '#/components/schemas/IndexMeta'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Not found
      security:
        - api_key: []
    post:
      operationId: create-contact
      tags:
        - Contacts
      summary: Create a contact
      description: Creates a new contact and returns the full contact representation
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      requestBody:
        description: The Contact object in format JSON to create
        content:
          application/json:
            schema:
              type: object
              properties:
                contact:
                  $ref: '#/components/schemas/Contact'
      responses:
        '200':
          description: Contact created successfully - returns full contact representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  contact:
                    $ref: '#/components/schemas/Contact'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /countries:
    get:
      operationId: get-countries
      tags:
        - Code lists
      summary: List countries
      description: Returns an array of countries where is available to use B2BRouter.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  countries:
                    type: array
                    items:
                      $ref: '#/components/schemas/Country'
      security:
        - api_key: []
  /schemes:
    get:
      operationId: get-schemes
      tags:
        - Code lists
      summary: List schemes
      description: Returns an array of available schemes to use.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  schemes:
                    type: array
                    items:
                      $ref: '#/components/schemas/Scheme'
      security:
        - api_key: []
  /currencies:
    get:
      operationId: get-currencies
      tags:
        - Code lists
      summary: List of currencies
      description: Returns an array of available currencies
      parameters:
        - $ref: '#/components/parameters/api_version_header'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  currencies:
                    type: array
                    items:
                      $ref: '#/components/schemas/Currency'
      security:
        - api_key: []
  /languages:
    get:
      operationId: get-languages
      tags:
        - Code lists
      summary: List of available languages
      description: Returns a list of all available languages in b2brouter.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  languages:
                    type: array
                    items:
                      $ref: '#/components/schemas/Language'
      security:
        - api_key: []
  /document_types:
    get:
      operationId: get-document-types
      tags:
        - Code lists
      summary: List of available document types
      description: Returns a list of all available document types in b2brouter.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  document_types:
                    type: array
                    items:
                      $ref: '#/components/schemas/DocumentType'
      security:
        - api_key: []
  /transport_types:
    get:
      operationId: get-transport-types
      tags:
        - Code lists
      summary: List of available transport types
      description: Returns a list of all available transport types in b2brouter.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  transport_types:
                    type: array
                    items:
                      $ref: '#/components/schemas/TransportType'
      security:
        - api_key: []
  /invoice_states:
    get:
      operationId: get-invoice-states
      tags:
        - Code lists
      summary: List of available invoice status
      description: Return an array of all available states of invoice.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  invoice_states:
                    type: array
                    items:
                      $ref: '#/components/schemas/InvoiceState'
      security:
        - api_key: []
  /accounts/{account}/events:
    get:
      operationId: get-events
      tags:
        - Events
      summary: List of events
      description: Returns a paginated list of the events of an account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/invoice_id_query'
        - $ref: '#/components/parameters/tax_report_id_query'
        - $ref: '#/components/parameters/date_from'
        - $ref: '#/components/parameters/date_to'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  events:
                    type: array
                    items:
                      anyOf:
                        - $ref: '#/components/schemas/InvoiceEvent'
                        - $ref: '#/components/schemas/ContactEvent'
                  meta:
                    $ref: '#/components/schemas/IndexMeta'
      security:
        - api_key: []
  /accounts/{account}/transports:
    get:
      operationId: get-transports
      tags:
        - Transports
      summary: List configured transports
      description: This endpoint list all transports this account has configured.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  transports:
                    type: array
                    items:
                      anyOf:
                        - $ref: '#/components/schemas/TransportB2brouter'
                        - $ref: '#/components/schemas/TransportEmail'
                        - $ref: '#/components/schemas/TransportPeppol'
                        - $ref: '#/components/schemas/TransportUserPassword'
                        - $ref: '#/components/schemas/TransportEdi'
                  meta:
                    $ref: '#/components/schemas/IndexMeta'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - api_key: []
    post:
      operationId: create-transport
      tags:
        - Transports
      summary: Create a transport configuration
      description: 'Some transport types needs configuration. Configurable transport types are: b2brouter, email, peppol, es.pecam, es.eusko_jaurlaritza, edicom, ediversa.'
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      requestBody:
        description: The transport configuration to create
        content:
          application/json:
            schema:
              type: object
              required:
                - transport
              properties:
                transport:
                  oneOf:
                    - allOf:
                        - $ref: '#/components/schemas/TransportB2brouter'
                        - required:
                            - code
                    - allOf:
                        - $ref: '#/components/schemas/TransportEmail'
                        - required:
                            - code
                    - allOf:
                        - $ref: '#/components/schemas/TransportPeppol'
                        - required:
                            - code
                            - pin_scheme
                            - pin_value
                    - allOf:
                        - $ref: '#/components/schemas/TransportUserPassword'
                        - required:
                            - code
                            - username
                            - password
                    - allOf:
                        - $ref: '#/components/schemas/TransportEdi'
                        - required:
                            - code
                            - username
                            - password
                            - edi_identifier
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  transport:
                    oneOf:
                      - $ref: '#/components/schemas/TransportB2brouter'
                      - $ref: '#/components/schemas/TransportEmail'
                      - $ref: '#/components/schemas/TransportPeppol'
                      - $ref: '#/components/schemas/TransportUserPassword'
                      - $ref: '#/components/schemas/TransportEdi'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /accounts/{account}/transports/{code}:
    get:
      operationId: get-transport
      tags:
        - Transports
      summary: Retrieve a transport configuration
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/transport_type_code'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                required:
                  - transport
                properties:
                  transport:
                    anyOf:
                      - $ref: '#/components/schemas/TransportB2brouter'
                      - $ref: '#/components/schemas/TransportEmail'
                      - $ref: '#/components/schemas/TransportPeppol'
                      - $ref: '#/components/schemas/TransportUserPassword'
                      - $ref: '#/components/schemas/TransportEdi'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    put:
      operationId: put-transport
      tags:
        - Transports
      summary: Update a transport configuration
      description: |
        This endpoint updates a transport configuration associated with an account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/transport_type_code'
      requestBody:
        description: The transport configuration to update
        content:
          application/json:
            schema:
              type: object
              required:
                - transport
              properties:
                transport:
                  anyOf:
                    - $ref: '#/components/schemas/TransportB2brouter'
                    - $ref: '#/components/schemas/TransportEmail'
                    - $ref: '#/components/schemas/TransportPeppol'
                    - $ref: '#/components/schemas/TransportUserPassword'
                    - $ref: '#/components/schemas/TransportEdi'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  transport:
                    oneOf:
                      - $ref: '#/components/schemas/TransportB2brouter'
                      - $ref: '#/components/schemas/TransportEmail'
                      - $ref: '#/components/schemas/TransportPeppol'
                      - $ref: '#/components/schemas/TransportUserPassword'
                      - $ref: '#/components/schemas/TransportEdi'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    delete:
      operationId: delete-transport
      tags:
        - Transports
      summary: Delete a transport configuration
      description: This endpoint deletes a transport configuration associated with an account.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/transport_type_code'
      responses:
        '200':
          description: Successful operation - returns full transport representation
          content:
            application/json:
              schema:
                type: object
                properties:
                  transport:
                    oneOf:
                      - $ref: '#/components/schemas/TransportB2brouter'
                      - $ref: '#/components/schemas/TransportEmail'
                      - $ref: '#/components/schemas/TransportPeppol'
                      - $ref: '#/components/schemas/TransportUserPassword'
                      - $ref: '#/components/schemas/TransportEdi'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /accounts/{account}/tax_reports:
    get:
      operationId: new-get-tax-reports
      tags:
        - Tax Reports
      summary: List tax reports
      description: Returns a paginated list of tax reports.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/invoice_id_query'
        - $ref: '#/components/parameters/sent_at_from'
        - $ref: '#/components/parameters/updated_at_from'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_reports:
                    type: array
                    items:
                      $ref: '#/components/schemas/TaxReport'
                  meta:
                    $ref: '#/components/schemas/IndexMeta'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - api_key: []
    post:
      operationId: new-create-tax-report
      tags:
        - Tax Reports
      summary: Create a Tax Report
      description: |-
        Creates a Tax Report.
        If the creation of the Tax Report is successful, the response of this action will already contain the QR code and the identifier for the Tax Report.
        However, you have to check the status of the tax report that we send in your behalf in order to be able to take the necessary actions in case any error or warning is issued by the Tax Authority. Because of the asynchronous nature of the tax report sending process, there is no guarantee that when you check the status of the tax reports it will already have the response of the Tax Authority. It usually takes a few seconds to complete the transaction. You will know that the transaction is complete if the response of the check of the status of the tax report has an status **registered**, **registered_with_errors***, or **error**. We recommend you retry the status check until you get a final state on your tax report, or that you configure [WebHooks](https://developer.b2brouter.net/reference/getnewtaxreportstatechange) for tax report state changes.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      requestBody:
        description: The Tax Report object in JSON format
        content:
          application/json:
            schema:
              type: object
              required:
                - tax_report
              properties:
                tax_report:
                  type: object
                  allOf:
                    - $ref: '#/components/schemas/TaxReport'
                    - type: object
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report:
                    $ref: '#/components/schemas/TaxReport'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /accounts/{account}/tax_reports/import:
    post:
      operationId: new-import-tax-report
      tags:
        - Tax Reports
      summary: Import a Tax Report from an XML file
      description: |-
        Import a Tax Report from an XML file
        If the creation of the Tax Report is successful, the response of this action will already contain the QR code and the identifier for the Tax Report. Note that if the XML file has chaining information (eg Huella for VeriFactu), this information will be ignored and our system will perform the chaining process regardless. This is the only way to ensure the integrity of the data sent to the Tax Authority.
        Remember that you have to check the status of the tax report that we send in your behalf in order to be able to take the necessary actions in case any error or warning is issued by the Tax Authority. Because of the asynchronous nature of the tax report sending process, there is no guarantee that when you check the status of the tax reports it will already have the response of the Tax Authority. It usually takes a few seconds to complete the transaction. You will know that the transaction is complete if the response of the check of the status of the tax report has an status **registered**, **registered_with_errors***, or **error**. We recommend you retry the status check until you get a final state on your tax report, or that you configure [WebHooks](https://developer.b2brouter.net/reference/getnewtaxreportstatechange) for tax report state changes.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/account'
      requestBody:
        description: The Tax Report XML file to import
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
      responses:
        '200':
          description: Tax Report has been created
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report:
                    $ref: '#/components/schemas/TaxReport'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '406':
          description: Not Acceptable
      security:
        - api_key: []
  /tax_reports/{id}:
    get:
      operationId: new-get-tax-report
      tags:
        - Tax Reports
      summary: Get a tax report
      description: |-
        Returns a tax report
        You have to check the status of the tax report that we send in your behalf in order to be able to take the necessary actions in case any error or warning is issued by the Tax Authority. Because of the asynchronous nature of the tax report sending process, there is no guarantee that when you check the status of the tax reports it will already have the response of the Tax Authority. It usually takes a few seconds to complete the transaction. You will know that the transaction is complete if the response of the check of the status of the tax report has an status **registered** or **error**. We recommend you retry the status check until you get a final state on your tax report or you configure [WebHooks](https://developer.b2brouter.net/reference/getnewTaxReportstatechange) for tax report state changes.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/tax_report_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report:
                    $ref: '#/components/schemas/TaxReport'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - api_key: []
    patch:
      operationId: new-modify-tax-report
      tags:
        - Tax Reports
      summary: Correct or Modify a Tax Report
      description: |-
        Correct or Modify a Tax Report
        If the tax report has already been registered by the Tax Authority, issue a correction ("subsanación" as it's call in Verifactu) of the tax report with the data provided in body.
        If the report has not been sent to the Tax Authority, change the fields indicated in the payload.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/tax_report_id'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report:
                    $ref: '#/components/schemas/TaxReport'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
    delete:
      operationId: new-annulate-tax-report
      tags:
        - Tax Reports
      summary: Annulates a tax report
      description: Annulates a TaxReport
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/tax_report_id'
      responses:
        '200':
          description: Successful annulation
          content:
            application/json:
              schema:
                type: object
                properties:
                  tax_report:
                    $ref: '#/components/schemas/TaxReport'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
      security:
        - api_key: []
  /tax_reports/{id}/download:
    get:
      operationId: new-download-tax-report
      tags:
        - Tax Reports
      summary: Download a tax report
      description: |-
        Download a tax report in the format that is sent to the Tax Authority.
        Note that if the Tax Authority requires the tax report to be cleared (such as in Zatca) or chained (such as in Verifactu and TicketBAI) the XML will only contain all the information after the tax report is chained or cleared. Given the the asynchronous nature of this process, there is no guarantee  that when you download the tax reports will be prepared. This process usually only takes a few seconds.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/tax_report_id'
      responses:
        '200':
          description: OK
          content:
            application/xml:
              schema:
                type: object
                properties:
                  tax_report:
                    $ref: '#/components/schemas/TaxReport'
        '403':
          description: Unauthorized
        '404':
          description: Tax Report not found
      security:
        - api_key: []
  /ledgers/{id}/download:
    get:
      operationId: download-ledger
      tags:
        - Ledgers
      summary: Download a Ledger
      description: |-
        Download a Ledger, the XML document sent to the Tax Authority.
        Note that sending the ledger to the Tax Authority is an asynchronous  process. No ledger can be downloaded until all tax reports in the ledger have been chained,
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/ledger_id'
      responses:
        '200':
          description: OK
          content:
            application/xml:
              schema:
                type: object
        '403':
          description: Unauthorized
        '404':
          description: Tax Report not found
      security:
        - api_key: []
  /ledgers/{id}/download_response:
    get:
      operationId: download-response-ledger
      tags:
        - Ledgers
      summary: Download the response for a Ledger
      description: |-
        Download the response from the Tax Authority for a Ledger.
        Note that sending the ledger to the Tax Authority is an asynchronous process. No response can be downloaded until B2Brouter receives it from the Tax Authority.
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/ledger_id'
      responses:
        '200':
          description: OK
          content:
            application/xml:
              schema:
                type: object
        '403':
          description: Unauthorized
        '404':
          description: Tax Report not found
      security:
        - api_key: []
  /accounts/{account}/ledgers/import:
    post:
      tags:
        - Ledgers
      summary: ' Import a ledger'
      description: ' Import a ledger by providing a raw XML payload.'
      operationId: importLedger
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - name: account
          in: path
          description: The ID of the account.
          required: true
          schema:
            type: integer
      requestBody:
        description: The raw XML payload of the ledger.
        required: true
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
      responses:
        '201':
          description: The ledger was successfully imported.
          content:
            application/json:
              schema:
                type: object
                properties:
                  ledger:
                    type: object
                    properties:
                      id:
                        type: integer
                        description: The ID of the ledger.
                      type:
                        type: string
                        description: The type of the ledger.
                      state:
                        type: string
                        description: The state of the ledger.
        '406':
          description: The request's "Content-Type" header is not "application/octet-stream".
        '422':
          description: The provided XML is invalid.
      security:
        - api_key: []
  /directory/{country}/{scheme}/{id}:
    get:
      operationId: lookup-directory-by-country-and-scheme
      tags:
        - Lookup
      summary: Show company from Directory (by country and scheme codes)
      description: Return the information about specified company that lists in our Directory
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/directory_country'
        - $ref: '#/components/parameters/directory_scheme'
        - $ref: '#/components/parameters/directory_id'
      responses:
        '200':
          description: Returns specified company from directory
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExternalCompany'
        '401':
          description: Unauthorized
        '404':
          description: Company not found
      security:
        - api_key: []
  /directory/{scheme}/{id}:
    get:
      operationId: lookup-directory-by-scheme
      tags:
        - Lookup
      summary: Show company from Directory (by scheme code)
      description: Return the information about specified company that lists in our Directory
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/directory_scheme'
        - $ref: '#/components/parameters/directory_id'
      responses:
        '200':
          description: Returns specified company from directory
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExternalCompany'
        '401':
          description: Unauthorized
        '404':
          description: Company not found
      security:
        - api_key: []
  /directory/{country}/{id}:
    get:
      operationId: lookup-directory-by-country
      tags:
        - Lookup
      summary: Show company from Directory (by country code)
      description: Return the information about specified company that lists in our Directory
      parameters:
        - $ref: '#/components/parameters/api_version_header'
        - $ref: '#/components/parameters/directory_country'
        - $ref: '#/components/parameters/directory_id'
      responses:
        '200':
          description: Returns specified company from directory
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExternalCompany'
        '401':
          description: Unauthorized
        '404':
          description: Company not found
      security:
        - api_key: []
  /documents/validate:
    post:
      operationId: validate-document
      tags:
        - Validation
      summary: Validates an electronic document
      description: |
        This endpoint validates a single electronic document provided in the request body. 

        The validation of the e-document is performed through:

        - Checking the use of a correct syntax schema (XSD).
        - Checking the business rules depending on the document type (Schematron).

        The following formats can be validated:
        - UBL (Universal Business Language)
        - CII (Cross Industry Invoice)
        - Peppol BIS
        - PINT (JP, SG, MY, AUNZ)
        - ZUGFeRD
        - XRechnung
        - Factur-X
        - FacturaE
        - Svefaktura
        - Fattura PA
        - eSPap
        - Any EN16931 CIUS-compliant format
      parameters:
        - $ref: '#/components/parameters/api_version_header'
      requestBody:
        description: The document file to validate.
        required: true
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
          text/plain:
            schema:
              type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentValidation'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
      security:
        - api_key: []
components:
  securitySchemes:
    api_key:
      type: apiKey
      description: API Key of your account
      name: X-B2B-API-Key
      in: header
  parameters:
    api_version_header:
      name: X-B2B-API-Version
      in: header
      description: |
        Specifies the version of the API to use in this request. If not specified uses the API-Version set in the group conifguration
        B2Brouter UI Application -> Developers -> API Keys -> API Version
      required: false
      schema:
        type: string
        example: '2025-10-13'
        default: '2025-10-13'
    offset:
      name: offset
      description: Jump to the first object.
      in: query
      required: false
      schema:
        type: integer
        default: 0
        example: 0
    limit:
      name: limit
      description: Number of items in the response (500 maximum)
      in: query
      required: false
      schema:
        type: integer
        default: 25
        example: 25
    account:
      name: account
      in: path
      description: Account identifier (ID)
      required: true
      schema:
        type: string
      example: my-account
    tax_authority_code:
      name: code
      description: Code of tax report setting
      in: path
      required: true
      schema:
        type: string
        example: verifactu
        enum:
          - tbai
          - sdi
          - lhdn
          - verifactu
    invoice_id:
      name: id
      in: path
      description: |
        An internal identifier that is unique to each **Invoice** within B2Brouter.
      required: true
      example: 4053100
      schema:
        type: integer
    include:
      name: include
      in: query
      description: If you want to get the associations with the entities, this has to be explicitly specified. If you need more details about the lines, use "detailed_lines"
      schema:
        type: string
        enum:
          - lines
          - detailed_lines
      example: lines
    disposition:
      name: disposition
      in: query
      description: In PDF, view the PDF file instead of downloading
      schema:
        type: string
        enum:
          - inline
        example: inline
    ack:
      name: ack
      in: query
      description: Mark the invoice as acknowledged.
      required: false
      schema:
        type: boolean
      example: true
    document_type_code:
      name: document_type_code
      in: path
      description: |
        An internal identifier that is unique to each **Document Type** within
        B2Brouter.<br> You can get all valid document type codes using the **Document
        Types** endpoint in Code lists section (`/document_types`).
        If you want to obtain the submitted format, use `original`.
      required: true
      example: xml.facturae.3.2
      schema:
        $ref: '#/components/schemas/DocumentTypeCode'
    type:
      name: type
      description: Filter on invoice type.
      in: query
      schema:
        type: string
        enum:
          - IssuedInvoice
          - ReceivedInvoice
          - IssuedSelfInvoice
          - IssuedSimplifiedInvoice
        default: IssuedInvoice
    ack_filter:
      name: ack
      in: query
      description: Filter documents with ACK.
      required: false
      schema:
        type: boolean
      example: true
    date_from:
      name: date_from
      in: query
      description: Filter from submission date.
      required: false
      schema:
        type: string
        format: date
      example: '2024-09-12'
    date_to:
      name: date_to
      in: query
      description: Filter to submission date
      required: false
      schema:
        type: string
        format: date
      example: '2024-09-12'
    due_date_from:
      name: due_date_from
      in: query
      description: Filter from due date
      required: false
      schema:
        type: string
        format: date
      example: '2024-09-12'
    due_date_to:
      name: due_date_to
      in: query
      description: Filter to due date
      required: false
      schema:
        type: string
        format: date
      example: '2024-09-12'
    number:
      name: number
      in: query
      description: Filter on invoice number. Performs an exact match search; only invoices with an invoice number exactly equal to the specified value will be returned
      required: false
      schema:
        type: string
      example: '10'
    state_updated_at_from:
      name: state_updated_at_from
      in: query
      description: Filter on change status date. Invoices with change status date later than the specified date are returned
      required: false
      schema:
        type: string
        format: date
      example: '2024-09-12'
    updated_at_from:
      name: updated_at_from
      in: query
      description: Filter on updated_at date. Entities with updated_at date later than the specified date are returned.
      required: false
      schema:
        type: string
        format: date
      example: '2024-10-11'
    taxcode:
      name: taxcode
      in: query
      description: Filter on customer VAT code
      required: false
      schema:
        type: string
      example: ESP2807900B
    new:
      name: new
      description: Filter on invoice status "new". Created and ready to be sent
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    sending:
      name: sending
      description: Filter on invoice status "sending". Invoice is being sent
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    error:
      name: error
      description: Filter on invoice status "error". An error has been raised when sending the invoice to its recipient
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    sent:
      name: sent
      description: Filter on invoice status "sent". Successfully sent to its recipient
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    refused:
      name: refused
      description: Filter on invoice status "refused". The recipient has refused the invoice. Usually, the reason for the rejection is provided
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    closed:
      name: closed
      description: Filter on invoice status "closed". The sender considers that the invoice is closed and does not want to perform further operations
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    registered:
      name: registered
      description: Filter on invoice status "registered". The receiver has registered the invoice. Some receivers may indicate a registration number
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    accepted:
      name: accepted
      description: Filter on invoice status "accepted". The receiver has accepted the invoice
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    allegedly_paid:
      name: allegedly_paid
      description: Filter on invoice status "allegedly_paid". The receiver has indicated that he has ordered the payment of the invoice
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    received_invoice_received:
      name: received
      description: Filter on received invoices with status "received".
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    received_invoice_paid:
      name: paid
      description: Filter on received invoices with status "paid".
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    received_invoice_ocr_failed:
      name: ocr_failed
      description: Filter on received invoices with status "ocr_failed".
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    received_invoice_exclude_offices:
      name: exclude_offices
      description: Do not show the invoices of the Organizational Units.
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    from_net:
      name: from_net
      in: query
      description: Filter on received invoice from net value. Use as a string search, for example, searching "api" lists all the received invoices that are received via API.
      required: false
      schema:
        type: string
      example: api
    send_after_import:
      name: send_after_import
      in: query
      description: |
        A flag to indicate if the invoice should be sent after import. It will only send the invoice if it passes all the validations.
        **Note:** This option is incompatible with the custom signature configuration.
      required: false
      schema:
        $ref: '#/components/schemas/SendAfterImport'
    transport_type_code_for_contact:
      name: transport_type_code_for_contact
      description: |
        Internal identifier that specifies the **Transport type** used for the **contact party** of the invoice within B2Brouter. This code determines the transport in which the document is exchanged with the contact entity.

        - If the contact already exists, this value will **overwrite** the existing `transport_type_code`.
        - If the parameter is **not provided**, the system assigns the `transport_type_code` based on the following priority:

        1. If the contact already exists, its current `transport_type_code` is used.
        2. If the contact does not exist:
           - If the contact is found in the **B2Brouter directory**, the code defined there is used.
           - Otherwise, the **default transport type** defined in the account settings is applied.

        Valid transport type codes can be retrieved from the **Transport Types** endpoint in the **Code Lists** section:  
        `/transport_types`

        If the specified `transport_type_code` is **invalid** or **incompatible**, the system will apply the **default** `transport_type_code` and `document_type_code`.
      in: query
      schema:
        $ref: '#/components/schemas/TransportTypeCode'
    document_type_code_for_contact:
      name: document_type_code_for_contact
      in: query
      description: |
        Internal identifier that specifies the **Document Type** used for the **contact party** of the invoice within B2Brouter. This code determines the format in which the document is exchanged with the contact entity.

        - If the contact already exists, this value will **overwrite** the existing `document_type_code`.
        - If the parameter is **not provided**, the system assigns the `document_type_code` based on the following priority:

          1. If the contact already exists, its current `document_type_code` is used.
          2. If the contact does not exist:
             - If the contact is found in the **B2Brouter directory**, the code defined there is used.
             - Otherwise, the **default document type** defined in the account settings is applied.

        Valid document type codes can be retrieved from the **Document Types** endpoint in the **Code Lists** section:  
        `/document_types`

        If the specified `document_type_code` is **invalid** or **incompatible** with the selected `transport_type_code`, the system will apply the **default** `transport_type_code` and `document_type_code`.
      example: xml.ubl.invoice.bis3
      schema:
        $ref: '#/components/schemas/DocumentTypeCode'
    issued:
      name: issued
      in: query
      description: |
        A flag that specifies whether the invoice to be imported is issued or received.
      required: false
      schema:
        type: boolean
        default: null
    filename:
      name: filename
      in: query
      description: |
        Name of the attachment.
      required: true
      example: test.pdf
      schema:
        type: string
    use_as_pdf_view:
      name: use_as_pdf_view
      in: query
      description: |
        Boolean to indicate that the uploaded PDF attachment should be used as the visual component 
        when generating a hybrid PDF (such as a ZUGFeRD document) or any legal PDF representation.
        When set to true, this attachment will be considered the legal PDF to display or embed, 
        instead of regenerating one from the invoice data. It can be used both for PDF deliveries 
        and for embedding XML (e.g., ZUGFeRD) into the provided PDF.

        NOTICE: If the invoice is modified after this PDF has been uploaded, the attachment will still be used as-is, unless explicitly replaced. 
        B2Brouter treats it as the legal representation provided by the account.
      required: false
      example: true
      schema:
        type: boolean
    order_id:
      name: id
      in: path
      description: A unique internal identifier of the **Order** in B2Brouter.
      required: true
      example: 4053100
      schema:
        $ref: '#/components/schemas/OrderId'
    order_format:
      name: format
      description: Format of the order
      in: path
      required: true
      schema:
        type: string
        enum:
          - json
          - original
        description: |
          In addition to the standard json format, there are some extra visualization formats for an order:
           * `json` - JSON format
           * `original` - Original format
        example: json
    order_number:
      name: number
      in: query
      description: Filter on order number.
      required: false
      schema:
        type: string
      example: '01'
    order_filename:
      name: filename
      in: query
      description: |
        Name of the attachment.
      required: false
      schema:
        type: string
        example: test.pdf
    order_delivery_location_id:
      name: delivery_location_id
      description: Filtered by delivery_location_id.
      in: query
      required: false
      schema:
        type: integer
        example: 123
    order_contact:
      name: contact
      description: Search field. Searches on the customer name and VAT code.
      in: query
      required: false
      schema:
        type: string
      example: John Doe
    order_sel_data:
      name: sel_data
      in: query
      description: Filter on submission date options.
      required: false
      schema:
        type: string
        enum:
          - issue_datetime
          - validity_end
          - delivery_date_start
          - order_confirmation.created_at
        description: |
          There are this options for an order:
           * `issue_datetime` - Filter on submission issue dates.
           * `validity_end` - Filter on submission validity end dates.
           * `delivery_date_start` - Filter on submission validity start dates.
           * `order_confirmation.created_at` - Filter on submission order confirmation dates.
        example: issue_datetime
    order_date_from:
      name: date_from
      in: query
      description: Filter from submission order date.
      required: false
      schema:
        type: string
        format: date
        example: '2022-01-01'
    order_date_to:
      name: date_to
      in: query
      description: Filter to submission order date.
      required: false
      schema:
        type: string
        format: date
        example: '2022-01-01'
    order_country:
      name: country
      description: Search field. Searches on the country code.
      in: query
      required: false
      schema:
        type: string
        example: es
    order_delivery_confirmed:
      name: delivery_confirmed
      description: Filter on order status "delivery confirmed".
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    order_closed:
      name: closed
      description: Filter on order status "closed".
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    order_accepted:
      name: accepted
      description: Filter on order status "accepted".
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    order_refused:
      name: refused
      description: Filter on order status "refused".
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    order_received:
      name: received
      description: Filter on order status "received".
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        maximum: 1
        enum:
          - 0
          - 1
        example: 1
    invoice_id_query:
      name: invoice_id
      description: Filtered per invoice.
      in: query
      required: false
      schema:
        type: integer
        example: 123
    tax_report_id_query:
      name: tax_report_id
      description: Filtered per tax_report.
      in: query
      required: false
      schema:
        type: integer
        example: 123
    transport_type_code:
      name: code
      description: Code of the transport
      in: path
      required: true
      schema:
        type: string
        enum:
          - b2brouter
          - peppol
          - email
          - es.eusko_jaurlaritza
          - es.pecam
          - edicom
          - ediversa
        example: peppol
    sent_at_from:
      name: sent_at_from
      in: query
      description: Filter on sent date. Tax reports with sent date later than the specified date are returned.
      required: false
      schema:
        type: string
        format: date
      example: '2024-10-11'
    tax_report_id:
      name: id
      in: path
      description: |
        A unique internal identifier of the Tax Report in B2Brouter.
      required: true
      example: 4053100
      schema:
        type: integer
    ledger_id:
      name: id
      in: path
      description: |
        A unique internal identifier of the Ledger in B2Brouter.
      required: true
      example: 405
      schema:
        type: integer
    directory_country:
      name: country
      description: Country identifier of the company.
      in: path
      required: true
      schema:
        type: string
        example: es
    directory_scheme:
      name: scheme
      description: Scheme number of the company identifier
      in: path
      required: true
      schema:
        type: integer
        example: 9920
    directory_id:
      name: id
      description: Value of the company identifier. You can introduce id without the prefix
      in: path
      required: true
      schema:
        type: string
        example: ES123456789, 123456789
  schemas:
    Account:
      type: object
      description: Represents an account as an object
      properties:
        id:
          type: integer
          example: 12345
          readOnly: true
          description: Internal account ID
        tin_value:
          type: string
          description: Tax identification number value
          maxLength: 255
          example: A13585625
        tin_scheme:
          type: string
          description: Tax identification number scheme
          maxLength: 255
          example: 9920
        cin_value:
          type: string
          description: Company identifier number value
          maxLength: 255
          nullable: true
          example: '1234567890123'
        cin_scheme:
          type: string
          description: Company identifier number scheme
          maxLength: 255
          nullable: true
          example: '0088'
        name:
          type: string
          description: Account name
          maxLength: 255
          example: My Company S.L.
        address:
          type: string
          description: Primary address
          maxLength: 255
          example: Carrer Example 123
        address2:
          type: string
          description: Secondary address
          maxLength: 255
          nullable: true
          example: Floor 2, Office 3
        city:
          type: string
          description: City
          maxLength: 255
          example: Barcelona
        postalcode:
          type: string
          description: Postal code
          maxLength: 255
          example: '08001'
        province:
          type: string
          description: Province or state
          maxLength: 255
          nullable: true
          example: Barcelona
        country:
          type: string
          description: Country code
          maxLength: 2
          example: es
          default: es
        currency:
          type: string
          description: Default currency
          maxLength: 3
          example: EUR
          default: EUR
        contact_person:
          type: string
          description: Main contact person
          maxLength: 255
          nullable: true
          example: John Doe
        phone:
          type: string
          description: Phone number
          maxLength: 255
          nullable: true
          example: 34666777888
        email:
          type: string
          description: Email address
          maxLength: 255
          format: email
          example: contact@company.com
        rounding_method:
          type: string
          enum:
            - half_up
            - bankers
            - truncate
          description: |
            Roundings (only for imported invoices)
             * `half_up` - Round half up
             * `bankers` - Bank rounding
             * `truncate` - Truncate decimals
          default: half_up
          example: half_up
        round_before_sum:
          type: boolean
          description: Whether to round before summing
          default: false
        apply_taxes_per_line:
          type: boolean
          description: Whether to apply taxes per line
          default: false
        registered_for_empl_tax:
          type: boolean
          description: Whether registered for employment tax
          default: false
        transport_type_code:
          type: string
          description: Default transport type code
          maxLength: 255
          nullable: true
          example: peppol
        document_type_code:
          type: string
          description: Default document type code
          maxLength: 255
          nullable: true
          example: xml.ubl.2.1
        has_logo:
          type: boolean
          description: Whether the account has an uploaded logo
          readOnly: true
          example: true
        archived:
          type: boolean
          description: Whether the account is archived
          readOnly: true
          example: false
        transactions_count:
          type: integer
          description: Number of transactions in current period
          readOnly: true
          example: 150
        transactions_count_previous_period:
          type: integer
          description: Number of transactions in previous period
          readOnly: true
          example: 120
        transactions_limit:
          type: integer
          description: Transaction limit for the subscription
          readOnly: true
          example: 1000
        created_at:
          type: string
          format: date-time
          readOnly: true
          description: Account creation timestamp
          example: '2024-07-07T11:51:57Z'
        updated_at:
          type: string
          format: date-time
          readOnly: true
          description: Account last update timestamp
          example: '2024-07-07T11:51:57Z'
    TransactionsEdocsync:
      properties:
        transactions_count:
          type: integer
          example: 16
          description: The transactions the account has made during the current period
          nullable: true
          readOnly: true
        transactions_count_previous_period:
          type: integer
          example: 28
          description: The transactions the account has made in the past period
          nullable: true
          readOnly: true
        transactions_limit:
          type: integer
          example: 25
          description: The number of transactions available for the current product
          nullable: true
          readOnly: true
    IndexMeta:
      type: object
      description: Represents meta data for listing endpoints
      properties:
        total_count:
          type: integer
          description: Total count of returned objects
          example: 1
        offset:
          type: integer
          description: Offset set by the params
          example: 0
        limit:
          type: integer
          description: Limit of the returned list set by the params
          example: 25
    Error:
      type: object
      description: Represents an error object returned in a failed request
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              description: A unique error code identifying the type of error. See https://developer.b2brouter.net/docs/error_codes for the full code list.
              example: parameter_empty
            message:
              type: string
              description: A human-readable error message providing more context about the error.
              example: The parameter 'param' is missing or the value is empty
            param:
              type: string
              description: The parameter in the request that caused the error (if applicable).
              example: param
            type:
              type: string
              description: The type of error. Currently the only possible value is "invalid_request_error".
              example: invalid_request
    UnauthorizedError:
      type: object
      description: Represents an error object returned in a failed request
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              description: A unique error code identifying the type of error.
              example: unauthorized
              default: unauthorized
            message:
              type: string
              description: A human-readable error message providing more context about the error.
              example: Invalid API Key provided, or the API key might not have the necessary permissions for this action.
            type:
              type: string
              description: The type of error, often mirrors the error code for clarity.
              example: invalid_request_error
              default: invalid_request_error
    AccountDeleted:
      allOf:
        - $ref: '#/components/schemas/Account'
        - type: object
          description: Account with deleted status (used in destroy responses)
          properties:
            deleted:
              type: boolean
              description: Whether the account was deleted (true) or archived (false)
              readOnly: true
              example: true
    BankAccount:
      type: object
      description: Represents a bank account as an object
      required:
        - type
      properties:
        id:
          type: integer
          description: Internal ID
          readOnly: true
          example: 402
        type:
          type: string
          description: |
            Bank account type:
             * `number` - Account number
             * `iban` - IBAN
          enum:
            - iban
            - number
          default: iban
          example: iban
        name:
          type: string
          description: Name
          example: My Bank Account
          maxLength: 255
        number:
          type: string
          description: Bank account number. This field is required only when `type` is set to `number`.
          example: 10000000000000000000
          maxLength: 24
        iban:
          type: string
          description: International Bank Account Number (IBAN). This field is required only when `type` is set to `iban`.
          example: ES6000000000000000000000
        bic:
          type: string
          description: Bank Identifier Code (BIC). This field is optional, and used only when `type` is set to `iban`.
          example: 0
          maxLength: 11
          nullable: true
        sufix:
          type: integer
          description: Sufix for the bank account
          example: 1
        address:
          type: string
          description: Address
          example: 1234 Main Street
          maxLength: 255
          nullable: true
        city:
          type: string
          description: City
          example: Barcelona
          maxLength: 255
        province:
          type: string
          description: Province
          example: Barcelona
        postalcode:
          type: string
          description: Postal Code
          example: 12345
        country:
          type: string
          description: Country. Use ISO 3166-1 alpha-2 country codes.
          example: es
          maxLength: 2
        created_at:
          type: string
          format: date-time
          example: '2021-02-20T19:12:44Z'
          readOnly: true
          description: Date and time when the bank account record was created
        updated_at:
          type: string
          format: date-time
          example: '2021-02-30T15:12:44Z'
          readOnly: true
          description: Date and time when the bank account record was last updated
    TbaiTaxReportSetting:
      type: object
      description: Represents a tax report settings for 'tbai' as an object
      properties:
        code:
          type: string
          example: tbai
          description: The Tax Report Authority code.
          enum:
            - tbai
        start_date:
          type: string
          format: date-time
          example: '2024-07-09T00:00:00.000Z'
          description: Date when the Tax Report Setting was enabled. If not provided, the current date and time will be used..
          nullable: true
        auto_generate:
          type: boolean
          example: true
          default: true
          description: Generate the Tax Report automatically
        auto_send:
          type: boolean
          example: true
          default: true
          description: Send the Tax Report automatically
        enabled:
          type: boolean
          example: true
          default: true
          description: Represents if the tax report setting is enabled
        delegation:
          type: string
          example: gipuzkoa
          description: Tax Authority Delegation.
          enum:
            - gipuzkoa
            - bizkaia
            - araba
        reason_vat_exempt:
          type: string
          example: E1
          description: TicketBAI Reason for VAT Exempt.
          enum:
            - E1
            - E2
            - E3
            - E4
            - E5
            - E6
          nullable: true
        special_regime_key:
          type: string
          example: '01'
          description: TicketBAI Special Regime Key.
          enum:
            - '01'
            - '02'
            - '03'
            - '04'
            - '05'
            - '06'
            - '07'
            - '08'
            - '09'
            - '10'
            - '11'
            - '12'
            - '13'
            - '14'
            - '15'
            - '51'
            - '52'
            - '53'
          nullable: true
        reason_no_subject:
          type: string
          example: OT
          description: Default TicketBAI Reason for No Subject.
          enum:
            - OT
            - RL
          nullable: true
        credit_note_code:
          type: string
          example: R1
          description: Default TicketBAI Credit Note Code.
          enum:
            - R1
            - R2
            - R3
            - R4
            - R5
          nullable: true
        type_operation:
          type: string
          example: services
          description: Default TicketBAI Type of Operation.
          enum:
            - services
            - goods
          nullable: true
        epigraph:
          type: string
          example: '147410'
          description: TicketBAI Epigraph needed for bizkaia delegation.
          nullable: true
        locked:
          type: boolean
          example: true
          description: Cannot be completely modified or deleted
          readOnly: true
        created_at:
          type: string
          format: date-time
          example: '2024-06-06T11:51:57Z'
          description: Date when the Tax Report Setting was created
          readOnly: true
        updated_at:
          type: string
          format: date-time
          example: '2024-06-06T11:51:57Z'
          description: Date when the Tax Report Setting was updated
          readOnly: true
    SdiTaxReportSetting:
      type: object
      description: Represents a tax report settings for 'sdi' as an object
      properties:
        code:
          type: string
          example: sdi
          description: The Tax Report Authority code.
          enum:
            - sdi
        start_date:
          type: string
          format: date-time
          example: '2024-06-06T11:51:57Z'
          description: Date when the Tax Report Setting was enabled
          nullable: true
        auto_generate:
          type: boolean
          example: true
          default: true
          description: Generate the Tax Report automatically
        auto_send:
          type: boolean
          example: true
          default: true
          description: Send the Tax Report automatically
        enabled:
          type: boolean
          example: true
          default: true
          description: Represents if the tax report setting is enabled
        locked:
          type: boolean
          example: true
          description: Cannot be completely modified or deleted
          readOnly: true
        created_at:
          type: string
          format: date-time
          example: '2024-06-06T11:51:57Z'
          description: Date when the Tax Report Setting was created
          readOnly: true
        updated_at:
          type: string
          format: date-time
          example: '2024-06-06T11:51:57Z'
          description: Date when the Tax Report Setting was last updated
          readOnly: true
    VerifactuTaxReportSetting:
      type: object
      description: Represents a tax report settings for VeriFactu as an object
      properties:
        code:
          type: string
          example: verifactu
          description: The Tax Report Authority code.
          enum:
            - verifactu
        start_date:
          type: string
          format: date-time
          example: '2025-04-29T00:00:00.000Z'
          description: Date when the Tax Report Setting was enabled. If not provided, the current date and time will be used.
          nullable: true
        auto_generate:
          type: boolean
          example: true
          default: true
          description: Generate the Tax Report automatically
        auto_send:
          type: boolean
          example: true
          default: true
          description: Send the Tax Report automatically
        enabled:
          type: boolean
          example: true
          default: true
          description: Represents if the tax report setting is enabled
        reason_vat_exempt:
          type: string
          example: E1
          description: |
            VeriFactu reason code for VAT Exemption. 
            [VeriFactu codes](https://developer.b2brouter.net/docs/verifactu#exemption-codes).
          enum:
            - E1
            - E2
            - E3
            - E4
            - E5
            - E6
          nullable: true
        special_regime_key:
          type: string
          example: '01'
          description: |
            VeriFactu Special Regime Key.
            [VeriFactu codes](https://developer.b2brouter.net/docs/verifactu#special-regime-key-codes).
          enum:
            - '01'
            - '02'
            - '03'
            - '04'
            - '05'
            - '06'
            - '07'
            - '08'
            - '09'
            - '10'
            - '11'
            - '14'
            - '15'
            - '17'
            - '18'
            - '19'
          nullable: true
        special_regime_key_igic:
          type: string
          example: '01'
          description: VeriFactu Special Regime Key for IGIC tax.
          enum:
            - '01'
            - '02'
            - '03'
            - '04'
            - '05'
            - '06'
            - '07'
            - '08'
            - '09'
            - '10'
            - '11'
            - '14'
            - '15'
            - '17'
            - '18'
            - '19'
            - '20'
          nullable: true
        reason_no_subject:
          type: string
          example: N1
          description: |
            VeriFactu Reason for No Subject.
            [VeriFactu codes](https://developer.b2brouter.net/docs/verifactu#non-subject-codes)
          enum:
            - N1
            - N2
          nullable: true
        credit_note_code:
          type: string
          example: R1
          description: |
            VeriFactu Credit Note Code.
            [VeriFactu codes](https://developer.b2brouter.net/docs/verifactu#invoice-type-codes)
          enum:
            - R1
            - R2
            - R3
            - R4
            - R5
          nullable: true
        locked:
          type: boolean
          example: true
          description: Cannot be completely modified or deleted
          readOnly: true
        created_at:
          type: string
          format: date-time
          example: '2024-06-06T11:51:57Z'
          description: Date when the Tax Report Setting was created
          readOnly: true
        updated_at:
          type: string
          format: date-time
          example: '2024-06-06T11:51:57Z'
          description: Date when the Tax Report Setting was updated
          readOnly: true
    LhdnTaxReportSetting:
      type: object
      description: Represents a tax report settings for 'lhdn' as an object
      properties:
        code:
          type: string
          example: lhdn
          description: The Tax Report Authority code.
          enum:
            - lhdn
        start_date:
          type: string
          format: date-time
          example: '2024-07-09T00:00:00.000Z'
          description: Date when the Tax Report Setting was enabled. If not provided, the current date and time will be used..
          nullable: true
        auto_generate:
          type: boolean
          example: true
          default: true
          description: Generate the Tax Report automatically
        auto_send:
          type: boolean
          example: true
          default: true
          description: Send the Tax Report automatically
        enabled:
          type: boolean
          example: true
          default: true
          description: Represents if the tax report setting is enabled
        msic:
          type: string
          example: '01111'
          description: Malaysia Standard Industrial Classification (MSIC) Code
          enum:
            - '00000'
            - A
            - '01111'
            - '01112'
            - '01113'
            - '01119'
            - '01120'
            - '01131'
            - '01132'
            - '01133'
            - '01134'
            - '01135'
            - '01136'
            - '01137'
            - '01138'
            - '01140'
            - '01150'
            - '01160'
            - '01191'
            - '01192'
            - '01193'
            - '01199'
            - '01210'
            - '01221'
            - '01222'
            - '01223'
            - '01224'
            - '01225'
            - '01226'
            - '01227'
            - '01228'
            - '01229'
            - '01231'
            - '01232'
            - '01233'
            - '01239'
            - '01241'
            - '01249'
            - '01251'
            - '01252'
            - '01253'
            - '01259'
            - '01261'
            - '01262'
            - '01263'
            - '01269'
            - '01271'
            - '01272'
            - '01273'
            - '01279'
            - '01281'
            - '01282'
            - '01283'
            - '01284'
            - '01285'
            - '01289'
            - '01291'
            - '01292'
            - '01293'
            - '01294'
            - '01295'
            - '01296'
            - '01299'
            - '01301'
            - '01302'
            - '01303'
            - '01304'
            - '01411'
            - '01412'
        type_operation:
          type: string
          example: services
          description: Default Type of Operation.
          enum:
            - services
            - goods
        classification_code:
          type: string
          description: |
            Default classification code, that defines the category of products or services being billed as a result of a commercial transaction.
          enum:
            - '001'
            - '002'
            - '003'
            - '004'
            - '005'
            - '006'
            - '007'
            - '008'
            - '009'
            - '010'
            - '011'
            - '012'
            - '013'
            - '014'
            - '015'
            - '016'
            - '017'
            - '018'
            - '019'
            - '020'
            - '021'
            - '022'
            - '023'
            - '024'
            - '025'
            - '026'
            - '027'
            - '028'
            - '029'
            - '030'
            - '031'
            - '032'
            - '033'
            - '034'
            - '035'
            - '036'
            - '037'
            - '038'
            - '039'
            - '040'
            - '041'
            - '042'
            - '043'
            - '044'
            - '045'
        locked:
          type: boolean
          example: true
          description: Cannot be completely modified or deleted
          readOnly: true
        created_at:
          type: string
          format: date-time
          example: '2024-06-06T11:51:57Z'
          description: Date when the Tax Report Setting was created
          readOnly: true
        updated_at:
          type: string
          format: date-time
          example: '2024-06-06T11:51:57Z'
          description: Date when the Tax Report Setting was updated
          readOnly: true
    TransportTypeCode:
      type: string
      maxLength: 100
      title: Transport Type Code
      description: |
        An internal identifier that is unique to each **Transport Type** within B2Brouter.<br> You can get all valid transport type codes using the **Transport Types** endpoint in Code lists section (`/transport_types`).
      example: peppol
      nullable: true
    DocumentTypeCode:
      type: string
      maxLength: 100
      title: Document Type Code
      description: |
        An internal identifier that is unique to each **Document Type** within B2Brouter.<br> You can get all valid document type codes using the **Document Types** endpoint in Code lists section (`/document_types`).
      example: xml.ubl.invoice.bis3
      nullable: true
    InvoiceContactHash:
      type: object
      description: Represents a contact as an object
      properties:
        id:
          type: integer
          example: 123
          readOnly: true
          description: Contact ID
        name:
          type: string
          description: |
            The full name of the Buyer.

            ID: `BT-44`
          example: Buyer Full Name AS
        tin_value:
          type: string
          description: |
            VAT identifier
            ID: `BT-48`
          maxLength: 255
          example: ESA13585625
        tin_scheme:
          type: string
          description: |
            The scheme identifier of VAT Number
            You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
          example: '9920'
        cin_scheme:
          type: string
          description: |
            The scheme identifier of Company Identifier Number (not a tax identifier number).
            You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
          nullable: true
          example: 88
          writeOnly: true
        cin_value:
          type: string
          description: Company Identifier Number
          nullable: true
          example: 7080000950171
          writeOnly: true
        address:
          type: string
          description: |
            The main address line in an address.

            ID: `BT-50`
          example: Lausitzer Str. 65
          nullable: true
        address2:
          type: string
          description: |
            An additional address line in an address that can be used to give further details supplementing the main line.

            ID: `BT-51`
          nullable: true
          example: Lausitzer Str. 66
        postalcode:
          type: string
          description: |
            The identifier for an addressable group of properties according to the relevant postal service.

            ID: `BT-53`
          example: '80535'
          nullable: true
        city:
          type: string
          description: |
            The common name of the city, town or village,where the Buyer's address is located.

            ID: `BT-52`
          example: Berlin
          nullable: true
        province:
          type: string
          description: |
            The  subdivision  of  a  country.

            ID: `BT-54`
          example: Berlin
          nullable: true
        country:
          type: string
          description: Country
          example: de
        email:
          type: string
          description: |
            An e-mail address for the contact point.

            ID: `BT-58`
          writeOnly: true
          example: example@email.com
        pin_value:
          type: string
          description: |
            Peppol Identifier Number, identifies the Buyer's electronic address to which the invoice is delivered.

            ID: `BT-49`
          example: '987654321'
          nullable: true
        pin_scheme:
          type: string
          description: |
            The identification scheme identifier of the Buyer electronic address.

            You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`). The value has to be in EAS code list
            https://docs.peppol.eu/poacc/billing/3.0/codelist/eas/
          example: '0192'
          nullable: true
        party_identification:
          type: string
          description: |
            Seller/Buyer identifier

            ID: `BT-29` if Contact is a Seller (Invoice is a Received Invoice)
            ID: `BT-46` if Contact is a Buyer (Invoice is an Issued Invoice)
          example: '506001234999'
          nullable: true
        transport_type_code:
          $ref: '#/components/schemas/TransportTypeCode'
        document_type_code:
          $ref: '#/components/schemas/DocumentTypeCode'
    StateOutput:
      type: string
      example: refused
      enum:
        - new
        - sent
        - accepted
        - registered
        - refused
        - closed
        - paid
        - annotated
        - error
        - invalid
      description: |
        States for an issued invoice:
         * `new` - The initial status of an issued invoice.
         * `sent` - The invoice has been sent successfully.
         * `accepted` - When the invoice is marked as accepted.
         * `registered` -  When a registered notification has been received or manually marked as registered.
         * `refused` - When a refused notification has been received or manually marked as refused.
         * `closed` - Is a final state.
         * `error` - Indicates that an error occurred while sending the invoice.

        States for a received invoice:
         * `new` - The initial status of an issued invoice or the invoice is manually marked as new.
         * `paid` - When the invoice has been paid or the invoice is marked manually as paid.
         * `accepted` - When the invoice is marked as accepted.
         * `refused` - When the invoice is marked as refused.
         * `annotated` - When the invoice is marked annotated.
         * `invalid` - When the invoice is marked as invalid during validation.
         * `error` - Indicates that an error occurred while processing the invoice.
    Tax:
      type: object
      description: Represents a tax as an object
      properties:
        name:
          type: string
          description: Tax Name
          example: IVA
        base:
          type: number
          format: decimal
          description: The base amount that may be used to calculate the Tax Amount
          example: 100
          readOnly: true
        amount:
          type: number
          format: decimal
          description: The amount of the tax.
          readOnly: true
          example: 21
        category:
          type: string
          enum:
            - E
            - NS
            - Z
            - S
            - H
            - AA
            - AAA
            - AE
            - G
            - O
            - K
          example: S
          description: |
            Taxes categories
             * `E` - Exempt
             * `NS` - NotSubject
             * `Z` - ZeroRated
             * `S` - Standard
             * `H` - High Rate
             * `AA` - Low Rate
             * `AAA` - Super Low Rate
             * `AE` - Reverse
             * `G` - Free export item, VAT not charged
             * `O` - Services outside scope of tax
             * `K` - VAT exempt for EEA intra-community supply of goods and services
          writeOnly: true
        percent:
          type: number
          format: float
          description: Tax %
          example: 21
        comment:
          type: string
          description: Tax comment
          nullable: true
          example: IVA 21%
    BankAccountCommon:
      type: object
      description: Represents common fields of a bank account as an object
      properties:
        type:
          type: string
          description: |
            Bank account type:
             * `number` - Account number
             * `iban` - IBAN
          enum:
            - iban
            - number
          default: iban
          example: iban
        number:
          type: string
          description: Bank account number. This field is required only when `type` is set to `number`.
          example: 10000000000000000000
          maxLength: 24
        iban:
          type: string
          description: International Bank Account Number (IBAN). This field is required only when `type` is set to `iban`.
          example: ES6000000000000000000000
        bic:
          type: string
          description: Bank Identifier Code (BIC). This field is optional, and used only when `type` is set to `iban`.
          example: 0
          maxLength: 11
          nullable: true
    CardAccountCommon:
      type: object
      description: |
        Represents common fields of a card account as an object.
        A group of business terms providing information about card used for payment contemporaneous with invoice issuance.
      properties:
        id:
          type: integer
          description: A unique identifier for this CardAccount across all the system.
          readOnly: true
        account_number:
          type: string
          description: |
            The Primary Account Number (PAN) of the card used for payment. In accordance with card payments security standards, 
            an invoice should never include a full card primary account number. 
            At the moment PCI Security Standards Council has defined that the first 6 digits and last 4 digits 
            are the maximum number of digits to be shown.
            ID: `BT-87`
          example: 1234567890
          minLength: 10
          maxLength: 10
        holder_name:
          type: string
          description: |
            The name of the payment card holder.
            ID: `BT-88`
          example: John Doe
        network:
          type: string
          description: Card Network identifier, such as VISA, American Express, Master Card.
          example: VISA
          maxLength: 50
          nullable: true
    AdditionalItemProperty:
      type: object
      description: A group of business terms providing information about properties of the goods and services invoiced.
      properties:
        name:
          type: string
          description: |
            Additional Item Property (Name) 

            ID: `BT-160`
        value:
          type: string
          description: |
            Additional Item Property (Value)

            ID: `BT-161`
    InvoiceLine:
      type: object
      required:
        - quantity
      description: |
        A group of business terms providing information on individual Invoice lines.

        ID: `BG-25`
      properties:
        id:
          type: integer
          example: 435453
          description: A unique identifier for this InvoiceLine across all the system. Only shown if the query parameter "include" is "detailed_lines".
          readOnly: true
        position:
          type: integer
          example: 1
          description: position
        quantity:
          type: number
          format: decimal
          description: |
            Invoiced quantity. The quantity of items (goods or services) that is charged in the Invoice line.

            ID: `BT-129`
          maxLength: 255
          example: 1
        price:
          type: number
          format: decimal
          description: |
            The price of an item, exclusive of VAT,after subtracting item price discount.

            ID: `BT-146`
          maxLength: 255
          example: 10
        description:
          type: string
          description: |
            Item Name.

            ID: `BT-153`
          maxLength: 65535
          nullable: true
          example: Item 1
        total_cost:
          type: number
          format: float
          description: Price * Quantity
          maxLength: 255
          readOnly: true
          example: 10
        extension_amount:
          type: number
          format: float
          description: |
            Line net total amount (total_cost + charges - discounts)

            ID: `BT-131`
          maxLength: 255
          example: 10
        unit:
          type: number
          maxLength: 255
          default: 1
          enum:
            - 1
            - 2
            - 3
            - 4
            - 5
            - 6
            - 7
            - 8
            - 9
            - 10
            - 11
            - 12
            - 15
            - 16
            - 17
            - 18
            - 19
            - 21
            - 22
            - 23
            - 24
            - 25
            - 26
            - 28
            - 30
            - 31
            - 32
            - 33
            - 34
            - 35
            - 36
          description: |
            * `1` - units
            * `2` - hours
            * `3` - kilograms
            * `4` - liters
            * `5`  - other
            * `6`  - days
            * `7`  - boxes
            * `8`  - trays
            * `9`  - barrels
            * `10` - bags
            * `11` - carboys
            * `12` - bottles
            * `15` - centiliters
            * `16` - centimeters
            * `17` - bins
            * `18` - dozens
            * `19` - cases
            * `21` - grams
            * `22` - kilometers
            * `23` - cans
            * `24` - bunches
            * `25` - meters
            * `26` - milimeters
            * `28` - packages
            * `30` - rolls
            * `31` - envelopes
            * `32` - tubs
            * `33` - cubicmeter
            * `34` - second
            * `35` - watt
            * `36` - squaremetre
          example: 1
        discount_amount:
          type: number
          format: decimal
          nullable: true
          description: |
            Discount amount (null if discount is a percentage)

            ID: `BT-136`
          maxLength: 255
          example: 100
        discount_percent:
          type: number
          format: decimal
          description: |
            Discount % (null if discount is an absolute amount). Invoice line allowance percentage. The percentage that may be used, in conjunction with the Invoice line allowance base amount, to calculate the Invoice line allowance amount.

            ID: `BT-138`
          maxLength: 255
          example: 20
          nullable: true
        discount_text:
          type: string
          description: |
            Invoice line allowance reason. The reason for the Invoice line allowance, expressed as text.

            ID: `BT-139`
          maxLength: 255
          writeOnly: true
          example: Discount
          nullable: true
        charge_amount:
          type: number
          format: decimal
          description: |
            Charge amount. (null if charge is a percentage)

            ID: `BT-141`
          nullable: true
          example: 4
        charge_percent:
          type: number
          format: decimal
          description: |
            Invoice line charge percentage. The percentage that may be used, in conjunction with the Invoice line charge base amount, to calculate Invoice line charge amount.
            (null if charge is an absolute amount)

            ID: `BT-143`
          example: 20
          nullable: true
        charge_reason:
          type: string
          description: |
            Invoice line charge reason. The reason for the Invoice line charge, expressed as text.

            ID: `BT-144`
          maxLength: 255
          example: Charge
          nullable: true
        gross_amount:
          type: number
          format: decimal
          description: total_cost + charges - discounts
          readOnly: true
          example: 100
        taxes:
          type: array
          description: Taxes
          items:
            $ref: '#/components/schemas/Tax'
          readOnly: true
        taxes_attributes:
          type: array
          description: Taxes
          items:
            $ref: '#/components/schemas/Tax'
          writeOnly: true
        article_code:
          type: string
          description: |
            Seller product ID. An identifier, assigned by the Seller, for the item.

            ID: `BT-155`
          maxLength: 255
          example: '9873242'
          nullable: true
        article_code2:
          type: string
          description: |
            Product ID. An item identifier based on a registered scheme.

            ID: `BT-157`
          maxLength: 255
          example: '10986700'
          nullable: true
        article_code2_scheme:
          type: string
          description: |
            Product ID Scheme.Item standard identifier identification scheme identifier. The identification scheme identifier of the Item standard identifier.

            ID: `BT-157-1`
          maxLength: 255
          writeOnly: true
          example: '0160'
          nullable: true
        article_code_buyer:
          type: string
          description: |
            Buyer product ID. An identifier, assigned by the Buyer, for the item.

            ID: `BT-156`
          maxLength: 255
          nullable: true
          example: '9873242'
        classification_code:
          type: string
          description: |
            Item Classification Code

            ID: `BT-158`
          maxLength: 255
          nullable: true
          example: '9873242'
        classification_code_scheme:
          type: string
          description: |
            Item Classification Code Scheme

            ID: `BT-158-1`
          maxLength: 255
          nullable: true
          example: '0160'
        item_origin_country:
          type: string
          description: |
            Item Origin Country

            ID: `BT-159`
          maxLength: 2
          nullable: true
          example: es
          writeOnly: true
        buyer_accounting_reference:
          type: string
          description: |
            A textual value that specifies where to book the relevant data into the Buyer's financial accounts.

            ID: `BT-133`
          maxLength: 255
          example: '1287:65464'
          nullable: true
        delivery_note_date:
          type: string
          format: date
          description: Dispatch advice date
          nullable: true
          example: '2024-09-12'
        delivery_note_number:
          type: string
          description: Dispatch advice no
          maxLength: 255
          nullable: true
          example: '123'
        file_reference:
          type: string
          description: |
            Project Reference
            [FacturaE Only]
          maxLength: 255
          writeOnly: true
          nullable: true
          example: BE-123
        file_date:
          type: string
          format: date
          description: |
            Date of file
            [Facturae Only] Tag: FileDATE
          nullable: true
          example: '2024-09-12'
        invoicing_period_start:
          type: string
          format: date
          description: |
            Invoice line period start date. The date when the Invoice period for this Invoice line starts.

            ID: `BT-134`
          maxLength: 255
          example: '2017-10-10'
          nullable: true
        invoicing_period_end:
          type: string
          format: date
          description: |
            Invoice line period end date. The date when the Invoice period for this Invoice line ends.

            ID: `BT-135`
          maxLength: 255
          example: '2017-10-15'
          nullable: true
        issuer_transaction_reference:
          type: string
          description: Receiving advice
          maxLength: 255
          nullable: true
          example: '123'
        issuer_transaction_date:
          type: string
          format: date
          description: |
            Date of issuer's operation
            [Facturae Only] Tag: IssuerTransactionDate
          nullable: true
          example: '2024-09-12'
        notes:
          type: string
          description: |
            A description for an item.

            ID: `BT-154`
          maxLength: 65535
          example: Long description of the item on the invoice line
          nullable: true
        ponumber:
          type: string
          description: |
            Purchase Order Number. An identifier for an object on which the invoice line is based, given by the Seller.


            ID: `BT-128`
          maxLength: 255
          example: PO123
          nullable: true
        receiver_transaction_date:
          type: string
          format: date
          description: |
            Date of recipient's operation
            [FacturaE Only]
          nullable: true
          example: '2024-09-12'
        receiver_contract_reference:
          type: string
          description: Assignment code
          maxLength: 255
          example: reference_123
          nullable: true
        receiver_contract_date:
          type: string
          format: date
          description: |
            Date of the recipient's contract
            [FacturaE Only]
          nullable: true
          example: '2024-09-12'
        sequence_number:
          type: string
          description: |
            Sequence number. An identifier for a referenced line within a purchase order, issued by the Buyer.

            ID: `BT-132`
          example: '3'
          nullable: true
        contact_reference:
          type: string
          description: |
            Accounting Cost

            ID: `BT-133`
          example: '3'
          nullable: true
          writeOnly: true
        receipt_reference:
          type: object
          description: The information about the referenced Receipt. Used only in FatturaPA exportation.
          properties:
            identifier:
              type: string
              description: The alphanumeric identifier of the receipt (or of the RT/server RT).
              nullable: true
              example: '123456'
            number:
              type: integer
              description: The progressive number of the receipt (or of the receipt or of the commercial commercial document).
              nullable: true
              example: 123
            date:
              type: string
              format: date
              description: The date of the receipt.
              nullable: true
              example: '2024-09-12'
        additional_item_properties_attributes:
          type: array
          items:
            $ref: '#/components/schemas/AdditionalItemProperty'
          writeOnly: true
        additional_item_properties:
          type: array
          items:
            $ref: '#/components/schemas/AdditionalItemProperty'
          readOnly: true
    PaymentDues:
      type: object
      description: Represents a payment due as an object
      properties:
        due_date:
          type: string
          format: date
          example: '2024-09-12'
        amount:
          type: number
          example: 10
    Invoice:
      type: object
      description: Represents an invoice as an object
      properties:
        id:
          type: integer
          example: 4053100
          description: |
            A unique internal identifier of the Invoice in B2Brouter.
          readOnly: true
        type:
          type: string
          description: Invoice type
          example: IssuedInvoice
          enum:
            - IssuedInvoice
            - ReceivedInvoice
            - IssuedSelfInvoice
            - IssuedSimplifiedInvoice
          default: IssuedInvoice
        number:
          type: string
          example: '3'
          description: |
            A unique identification of the Invoice.

            ID: `BT-1`
          maxLength: 100
        series_code:
          type: string
          example: S01
          description: |
            The series code of the Invoice.
        to_net:
          type: string
          readOnly: true
          nullable: true
          example: '123'
        to_net_id:
          type: string
          readOnly: true
          nullable: true
          example: '123'
        from_net:
          type: string
          readOnly: true
          nullable: true
          example: '123'
        from_net_id:
          type: string
          readOnly: true
          nullable: true
          example: '123'
        account:
          type: object
          properties:
            id:
              type: integer
              example: 742
              description: Account ID
            name:
              type: string
              example: Project Trading Name
              description: Account Name
          readOnly: true
        company:
          type: object
          properties:
            id:
              type: integer
              example: 742
              description: Unique identifier for the company.
            name:
              type: string
              example: Company Trading Name
              description: |
                A name by which the Seller/Buyer is known, other than Seller/Buyer name (also known as Business name).

                ID: `BT-27` and `BT-28` if the company is the Seller Party (in case to be a IssuedInvoice).
                ID: `BT-44` and `BT-45` if the company is the Buyer Party (in case to be a ReceivedInvoice).
            tin_value:
              type: string
              description: |
                VAT identifier
                ID: `BT-31` if the company is the Seller Party (in case to be a IssuedInvoice). ID: `BT-48` if the company is the Buyer Party (in case to be a ReceivedInvoice).
              maxLength: 255
              example: ESA13585625
            tin_scheme:
              type: string
              description: |
                The scheme identifier of VAT Number
                You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
              example: '9920'
            address:
              type: string
              description: |
                The main address line in an address.

                ID: `BT-35` if the company is the Seller Party (in case to be a IssuedInvoice).
                ID: `BT-50` if the company is the Buyer Party (in case to be a ReceivedInvoice).
              example: Main Street 1
              nullable: true
            address2:
              type: string
              description: |
                An additional address line in an address that can be used to give further details supplementing the main line.

                ID: `BT-36` if the company is the Seller Party (in case to be a IssuedInvoice).
                ID: `BT-51` if the company is the Buyer Party (in case to be a ReceivedInvoice).
              example: Po Box 351
              nullable: true
            postalcode:
              type: string
              description: |
                The identifier for an addressable group of properties according to the relevant postal service.

                ID: `BT-38` if the company is the Seller Party (in case to be a IssuedInvoice).
                ID: `BT-53` if the company is the Buyer Party (in case to be a ReceivedInvoice).
              example: 34567
              nullable: true
            city:
              type: string
              description: |
                The common name of the city, town or village,where the Seller/Buyer address is located.

                ID: `BT-37` if the company is the Seller Party (in case to be a IssuedInvoice).
                ID: `BT-52` if the company is the Buyer Party (in case to be a ReceivedInvoice).
              example: Stockholm
              nullable: true
            province:
              type: string
              description: |
                The  subdivision  of  a  country. Such as a region, a county, a state, a province, etc.

                ID: `BT-39` if the company is the Seller Party (in case to be a IssuedInvoice).
                ID: `BT-54` if the company is the Buyer Party (in case to be a ReceivedInvoice).
              example: Region A
              nullable: true
            country:
              type: string
              description: |
                A code that identifies the country.

                ID: `BT-40` if the company is the Seller Party (in case to be a IssuedInvoice).
                ID: `BT-55` if the company is the Buyer Party (in case to be a ReceivedInvoice).
              example: se
              nullable: true
          readOnly: true
        contact_id:
          type: integer
          description: |
            If the customer exists on B2Brouter and you know its ID, you can
            pass it, inside invoice hash, with contact_id. If it does not exist
            or you don’t know its ID, you can pass a hash with contact
            attributes, inside the invoice hash.
          writeOnly: true
          example: 123
        contact:
          allOf:
            - $ref: '#/components/schemas/InvoiceContactHash'
          writeOnly: true
        state:
          allOf:
            - $ref: '#/components/schemas/StateOutput'
          readOnly: true
        refuse_reason:
          type: string
          example: Incorrect invoice amount
          description: The reason provided for refusing the invoice.
          readOnly: true
          nullable: true
        date:
          type: string
          format: date
          description: |
            The date when the Invoice was issued.

            ID: `BT-2`
          example: '2020-11-12'
        due_date:
          type: string
          format: date
          description: |
            The date when the payment is due.

            ID: `BT-9`
          example: '2021-01-04'
          nullable: true
        tax_point_date:
          type: string
          format: date
          description: |
            The date when the VAT becomes accountable for the Seller and for the Buyer in so far as that date can be
            determined and differs from the date of issue of the invoice, according to the VAT directive.
            This element is required if the Value added tax point date is different from the Invoice issue date.

            ID: `BT-7`
          example: '2022-02-01'
          nullable: true
        invoicing_period_start:
          type: string
          format: date
          description: |
            The date when the invoice period starts.

            ID: `BT-73`
          example: '2024-07-07'
          nullable: true
        invoicing_period_end:
          type: string
          format: date
          description: |
            The date when the invoice period ends.

            ID: `BT-74`
          example: '2024-07-07'
          nullable: true
        buyer_reference:
          type: string
          maxLength: 255
          description: |
            An identifier assigned by the Buyer used for internal routing purposes.

            ID: `BT-10`
          example: '321654'
          nullable: true
        file_reference:
          type: string
          description: |
            The identification of the project the invoice refers to.

            ID: `BT-11`
          maxLength: 255
          example: PID33
          nullable: true
        ponumber:
          type: string
          maxLength: 255
          description: |
            Purcharse order reference. An identifier of a referenced purchase order, issued by the Buyer.

            ID: `BT-13`
          nullable: true
          example: '123'
        sales_order_reference:
          type: string
          maxLength: 255
          description: |
            An identifier of a referenced sales order, issued by the Seller.

            ID: `BT-14`
          example: '123'
          nullable: true
        receiving_advice_reference:
          type: string
          maxLength: 255
          description: |
            An identifier of a referenced receiving advice.

            ID: `BT-15`
          example: '123'
          nullable: true
        lot_reference:
          type: string
          maxLength: 255
          description: |
            Tender or Lot number. The identification of the call for tender or lot
            the invoice relates to.


            ID: `BT-17`
          example: '321654'
          nullable: true
        contract_number:
          type: string
          maxLength: 255
          description: |
            Contract reference. The identification of a contract.

            ID: `BT-12`
          example: 123Contractref
          nullable: true
        party_identification:
          type: string
          maxLength: 60
          description: |
            Seller identifier or bank assigned creditor identifier

            *This element is used for both the identification of the Seller, or the unique banking reference identifier of Seller (assigned by the Seller bank.). For seller identification use ICD code list, for SEPA bank assigned creditor reference, use SEPA. In order for the buyer to automatically identify a supplier, the Seller identifier (`BT-29`), the Seller legal registration identifier (`BT-30`) and/or the Seller VAT identifier (`BT-31`) shall be present*
          example: '506001234999'
          nullable: true
        delivery_note_number:
          type: string
          maxLength: 220
          description: |
            An identifier of a referenced despatch advice

            ID: `BT-16`
          example: '321654'
          nullable: true
        delivery_note_date:
          type: string
          format: date
          description: |
            Dispatch advice date
            [FacturaE and FatturaPA only]
          example: '2024-07-07'
          nullable: true
        buyer_accounting_reference:
          type: string
          description: |
            A textual value that specifies where to book the relevant data into the Buyer's financial accounts.

            ID: `BT-19`
          maxLength: 255
          nullable: true
        customer_contact_person:
          type: string
          maxLength: 170
          description: Overwrites the existing contact of the client
          example: John Doe
          nullable: true
        language:
          type: string
          maxLength: 2
          description: |
            Contact language. It should be a language available inside B2Brouter.
            You can check all available languages using the **Languages** endpoint in Code lists section (`/languages`)
          enum:
            - en
            - es
            - ca
            - fr
            - it
            - de
            - pt
            - nl
            - pl
            - da
            - sv
            - ar
          example: en
          nullable: true
        amended_number:
          type: string
          description: |
            Number of the invoice to amend.

            ID: `BT-25`
          example: '123'
          nullable: true
        amended_date:
          type: string
          description: |
            Date of the invoice to amend

            ID: `BT-26`
          example: '2024-01-01'
          nullable: true
        amended_invoicing_period_start:
          type: string
          format: date
          description: |
            [Facturae Only]

            ../Corrective/TaxPeriod/StartDate
          nullable: true
          example: '2024-01-01'
        amended_invoicing_period_end:
          type: string
          format: date
          description: |
            [Facturae Only]

            ../Corrective/TaxPeriod/EndDate
          nullable: true
          example: '2024-01-30'
        amend_reason:
          type: string
          description: |
            [Facturae Only]

            ../Corrective/TaxPeriod/EndDate

            * `01` - Invoice number
            * `02` - Invoice serial number
            * `03` - Issue date
            * `04` - Name and surnames/Corporate name – Issuer (Sender)
            * `05` - Name and surnames/Corporate name - Receiver
            * `06` - Issuer’s Tax Identification Number
            * `07` - Receiver’s Tax Identification Number
            * `08` - Issuer’s address
            * `09` - Receiver’s address
            * `10` - Item line
            * `11` - Applicable Tax Rate
            * `12` - Applicable Tax Amount
            * `13` - Applicable Date/Period
            * `14` - Invoice Class
            * `15` - Legal literals
            * `16` - Taxable Base
            * `80` - Calculation of tax outputs
            * `81` - Calculation of tax inputs
            * `82` - Taxable Base modified due to return of packages and packaging materials
            * `83` - Taxable Base modified due to discounts and rebates
            * `84` - Taxable Base modified due to firm court ruling or administrative decision
            * `85` - Taxable Base modified due to unpaid outputs where there is a judgement opening insolvency proceedings
          nullable: true
          example: '01'
        correction_method:
          type: string
          description: |
            [Facturae Only]

            ../Corrective/CorrectionMethod

            * `02` - Only items already corrected are noted.
          nullable: true
          example: '01'
        adjustment_in_cents:
          type: integer
          example: 2
          minimum: -99
          maximum: 99
          description: |
            The amount (in cents) to be added to the invoice total to round the amount to be paid.

            ID: `BT-114`
        charge_amount:
          type: number
          format: decimal
          description: |
            The amount of the charge, without VAT.

            ID: `BT-99`
          example: 363.5
        charge_percent:
          type: number
          format: decimal
          nullable: true
          description: |
            Invoice charge percentage. The percentage that may be used to
            calculate the invoice charge amount.


            ID: `BT-101`
          example: 20
        charge_reason:
          type: string
          description: |
            Invoice charge reason. The reason for the Invoice charge, expressed as
            text.


            ID: `BT-104`
          maxLength: 255
          nullable: true
          example: Charge
        discount_amount:
          type: number
          format: decimal
          maxLength: 60
          description: |
            The amount of the discount, without VAT.

            ID: `BT-92`
          example: 20
        discount_percent:
          type: number
          nullable: true
          format: float
          maxLength: 60
          description: |
            Invoice discount percentage. The percentage that may be used to
            calculate the invoice discount amount.

            ID: `BT-94`
          example: 20
        discount_text:
          type: string
          maxLength: 60
          description: |
            The reason for the document level discount expressed as text.

            ID: `BT-97`
          nullable: true
          example: Discount
        subtotal:
          type: number
          format: float
          example: 363.5
          readOnly: true
        taxes:
          type: array
          items:
            $ref: '#/components/schemas/Tax'
          readOnly: true
        total:
          type: number
          format: float
          example: 363.5
          readOnly: true
        currency:
          type: string
          example: EUR
          description: |
            The currency in which all Invoice amounts are given, except for the
            Total VAT amount in accounting currency.


            ID: `BT-5`
          maxLength: 3
        amounts_withheld_reason:
          type: string
          maxLength: 255
          description: Withheld reason
          nullable: true
          example: Withheld
        withheld_percent:
          type: number
          nullable: true
          format: decimal
          description: Withheld percent
          example: 10
        amounts_withheld:
          type: number
          description: Withheld amount
          example: 36.35
        payable_amount:
          type: number
          format: float
          description: |
            The outstanding amount that is requested to be paid.

            ID: `BT-115`
          example: 327.15
          readOnly: true
        payments_on_account:
          type: number
          format: float
          description: |
            Total Prepaid Amount

            ID: `BT-113`
          example: 327.15
          writeOnly: true
        payment_method:
          type: integer
          enum:
            - 1
            - 2
            - 3
            - 4
            - 7
            - 10
            - 11
            - 12
            - 13
            - 14
            - 15
            - 17
            - 19
            - 31
            - 54
            - 56
            - 58
            - 59
            - 101
            - 102
          maxLength: 4
          description: |
            The means, expressed as code, for how a payment is expected to be or has been settled.
            ID: `BT-81`
            This is B2Brouter’s internal code list for payment means. Each internal code maps to a UBL code following the EN 16931 semantic model.
            Payment method
             * `1` - Cash (UBL: 10)
             * `2` - Direct debit (UBL: 49)
             * `3` - Hold (UBL: 8)
             * `4` - Bank transfer (UBL: 30)
             * `7` - Awarded contract (UBL: ZZZ)
             * `10` - Promissory note (UBL: 60)
             * `11` - Cheque (UBL: 20)
             * `12` - Reposition (UBL: ZZZ)
             * `13` - Other (UBL: ZZZ)
             * `14` - Compensation (UBL: 97)
             * `15` - Payment by postgiro (UBL: 50)
             * `17` - Bank cheque (UBL: 23)
             * `19` - Bank card (UBL: 48)
             * `31` - Debit transfer (UBL: 31)
             * `54` - Credit card (UBL: 54)
             * `56` - Bank giro (UBL: 56)
             * `58` - SEPA bank transfer (SCT) (UBL: 58)
             * `59` - SEPA Direct Debit (SDD) (UBL: 59)
             * `101` - GIRO (UBL: ZZZ)
             * `102` - PayNow Corporate (UBL: ZZZ)
          example: 4
        payment_method_text:
          type: string
          maxLength: 255
          description: |
            The means, expressed as text, for how a payment is expected to be or has been settled.

            ID: `BT-82`
          example: Bank transfer
          nullable: true
        payment_terms:
          type: string
          maxLength: 65535
          description: |
            Payment terms. A textual description of the payment terms that apply
            to the amount due for payment (Including description of possible
            penalties).


            ID: `BT-20`
          example: Payment terms
          nullable: true
        bank_assigned_creditor_reference:
          type: string
          description: |
            Bank assigned creditor reference

            ID: `BT-90`
          maxLength: 255
          example: ES6000000000000000000000
          nullable: true
        remittance_information:
          type: string
          maxLength: 180
          description: |
            Remittance information. A textual value used to establish a link
            between the payment and the Invoice, issued by the Seller.


            ID: `BT-83`
          example: Remittance information
          nullable: true
        mandate_reference_identifier:
          type: string
          maxLength: 110
          description: |
            Mandate reference identifier. Unique identifier assigned by the Payee for referencing the direct debit mandate.

            ID: `BT-89`
          example: '321654'
          nullable: true
        bank_account_id:
          type: integer
          description: |
            Unique identifier for an existing bank account in B2Brouter.
            Use this field to reference an existing bank account. To create a new account, use `bank_account` instead.
          example: 402
          writeOnly: true
        bank_account:
          description: |
            Represents a bank account as an object.
            Use this field to create a new bank account.
          type: object
          writeOnly: true
          allOf:
            - $ref: '#/components/schemas/BankAccountCommon'
        contact_iban:
          type: string
          description: The IBAN associated with a received invoice.<br>This field is only applicable for received invoices and should be ignored for other invoice types.
          example: ES6000000000000000000000
        contact_bic:
          type: string
          description: The BIC associated with a received invoice.<br>This field is only applicable for received invoices and should be ignored for other invoice types.
          example: '123'
        card_account_attributes:
          description: |
            Represents the card account of the customer party.
            Use this field to create the card account for this invoice.
          type: object
          allOf:
            - $ref: '#/components/schemas/CardAccountCommon'
            - type: object
              required:
                - account_number
          writeOnly: true
        card_account:
          description: |
            Represents the card account of the customer party.
            Use this field to create the card account for this invoice.
          type: object
          allOf:
            - $ref: '#/components/schemas/CardAccountCommon'
          readOnly: true
        reminder_for_payment:
          type: boolean
          description: Send expiration reminder to customer
          writeOnly: true
          nullable: true
        payment_reminder_days:
          type: integer
          description: payment_reminder_days
          writeOnly: true
          example: 15
        terms:
          type: string
          default: custom
          enum:
            - custom
            - '0'
            - '15'
            - '30'
            - '60'
            - '90'
            - '120'
            - 0m-1
            - 1m-1
            - 1m1
            - 2m1
            - 1m15
            - 1m20
            - 1m10
          description: |
            Term
            * `custom` - Custom
            * `0` - Upon Receipt
            * `15` - 15 days
            * `30` - 30 days
            * `60` - 60 days
            * `90` - 90 days
            * `120` - 120 days
            * `0m-1` - Last day this month
            * `1m-1` - Last day next month
            * `1m1` - 1st day next month
            * `2m1` - 1st day in two months
            * `1m15` - 15th day next month
            * `1m20` - 20th day next month
            * `1m10` - 10th day next month
          nullable: true
          example: 1m1
          writeOnly: true
        extra_info:
          type: string
          maxLength: 65535
          description: |
            A textual note that gives unstructured information that is relevant to the Invoice as a whole.

            ID: `BT-22`
          nullable: true
          example: Some extra info
        tax_report_ids:
          type: array
          description: An array containing the internal IDs of the associated Tax Reports.
          readOnly: true
          items:
            type: integer
        legal_literals:
          type: string
          maxLength: 255
          description: Certification
          example: Legal literals
          nullable: true
        delivery_party_name:
          type: string
          example: Delivery party name
          description: |
            The name of the party to which the goods and services are delivered.

            ID: `BT-70`
          maxLength: 255
          nullable: true
        delivery_location_id:
          type: string
          maxLength: 90
          description: |
            An identifier for the location at which the goods and services are delivered.

            ID: `BT-71`
          example: 83745498753497
          nullable: true
        delivery_location_type:
          type: string
          maxLength: 20
          description: |
            The identification scheme identifier of the Deliver to location identifier.

            ID: `BT-71` (attribute @schemeID)
          example: 88
          nullable: true
        delivery_date:
          type: string
          format: date
          description: |
            The date on which the supply of goods or services was made or completed.

            ID: `BT-72`
          example: '2024-07-07'
          nullable: true
        delivery_address:
          type: string
          maxLength: 160
          description: |
            Deliver to address. The main address line in an address.

            ID: `BT-75`
          example: Invented address, 1
          nullable: true
        delivery_address2:
          type: string
          maxLength: 160
          description: |
            Deliver to addresss line 2. An additional address line in an address that can be used to give further details supplmenting the main line.

            ID: `BT-76`
          example: Invented address, 2
          nullable: true
        delivery_postalcode:
          type: string
          maxLength: 60
          description: |
            The identifier for an addressable group of preperties according to the relevant postal service.

            ID: `BT-78`
          example: '80808'
          nullable: true
        delivery_city:
          type: string
          maxLength: 50
          description: |
            Deliver to city, The common name of the city, town or village, where the deliver to address is located.

            ID: `BT-77`
          example: Barcelona
          nullable: true
        delivery_province:
          type: string
          maxLength: 60
          description: |
            Deliver to country subdivision. The subdivision of a country. Such as a region, a county, a state, a province, etc.

            ID: `BT-79`
          example: Barcelona
          nullable: true
        delivery_country:
          type: string
          maxLength: 2
          description: |
            Deliver to country code. A code that identifies the country.

            ID: `BT-80`
          example: ES
          nullable: true
        download_legal_url:
          type: string
          description: The attachment of the original invoice if sent.
          readOnly: true
          nullable: true
          example: http://example.com
        public_url:
          type: string
          description: |
            The public page of the B2Brouter invoice, visible to the contact if the invoice status allows it.
            For example, a new invoice does not have a public URL, but a sent invoice does.
          readOnly: true
          nullable: true
          example: http://example.com
        created_at:
          type: string
          format: datetime
          description: A datetime when the object was created in B2Brouter
          example: '2020-07-06T09:36:18Z'
          readOnly: true
        updated_at:
          type: string
          format: datetime
          description: A datetime of the last time the invoice was updated.
          example: '2020-07-06T09:36:18Z'
          readOnly: true
        state_updated_at:
          type: string
          format: datetime
          example: '2020-07-06T09:36:18Z'
          description: A datetime of the last time the state of the invoice was changed.
          readOnly: true
          nullable: true
        ack_at:
          type: string
          format: datetime
          example: '2020-07-06T09:36:18Z'
          description: The datetime when this Invoice was acknowledged
          readOnly: true
          nullable: true
        invoice_lines_attributes:
          type: array
          description: |
            A group of business terms providing information on individual invoice
            lines.


            ID: `BG-25`
          items:
            $ref: '#/components/schemas/InvoiceLine'
          writeOnly: true
          minItems: 1
        lines:
          type: array
          description: |
            A group of business terms providing information on individual invoice
            lines.
            Only shown if the query parameter "include" is "lines" or "detailed_lines".

            ID: `BG-25`
          items:
            $ref: '#/components/schemas/InvoiceLine'
          readOnly: true
          nullable: true
        payment_dues_attributes:
          type: array
          items:
            $ref: '#/components/schemas/PaymentDues'
          writeOnly: true
        payment_dues:
          type: array
          description: Represents a payment due as an object
          items:
            $ref: '#/components/schemas/PaymentDues'
          readOnly: true
        type_document:
          type: string
          description: |
            Value for mapping FatturaPA-specific values to the SDI document types.
            Explanation of each value:
            - TD01: Invoice (Fattura)
            - TD02: Advance payment on invoice (Acconto/Anticipo su fattura)
            - TD03: Advance payment on proforma invoice (Acconto/Anticipo su parcella)
            - TD04: Credit note (Nota di credito)
            - TD05: Debit note (Nota di debito)
            - TD06: Proforma invoice (Parcella)
            - TD16: Local reverse charge (Integrazione per acquisti interni)
            - TD17: Self invoice for EU services (Integrazione o autofattura per acquisti di servizi da soggetto non residente ai sensi dell’articolo 17, comma 2, DPR 633/1972)
            - TD18: EU acquisition reverse charge (Integrazione della fattura del fornitore UE per acquisto intracomunitario di beni)
            - TD19: Not resident acquisition reverse charge (Integrazione o autofattura per acquisti di beni da soggetti non residenti ai sensi dell’articolo 17, comma 2, DPR 633/1972)
            - TD20: Self invoice (Autofattura per regolarizzazione e integrazione delle fatture)
            - TD21: Regulated plafond self invoice (In caso di emissione di autofattura per regolarizzazione dello splafonamento)
            - TD22: VAT deposit (In caso di estrazione beni da Deposito IVA)
            - TD23: VAT deposit with VAT payment (In caso di estrazione beni da Deposito IVA con versamento dell’IVA)
            - TD24: Deferred invoice with DDT (Fattura differita – art 21, 4 comma, lett. a), del DPR 633/72, quindi fattura differita di beni e servizi collegata a DDT per i beni o da idonea documentazione di prova dell’effettuazione per le prestazioni di servizio)
            - TD25: Deferred invoice for internal triangular operations (Fattura differita di cui all’art. 21, 4 comma, lett. b), del DPR 633/72, quindi fattura differita per operazioni triangolari interne)
            - TD26: Sales of assets (Per la cessione di beni ammortizzabili e per passaggi interni)
            - TD27: Free of charge or self-consumption (In caso di fatture per auto consumo o per cessioni gratuite senza rivalsa)
          enum:
            - TD01
            - TD02
            - TD03
            - TD04
            - TD05
            - TD06
            - TD16
            - TD17
            - TD18
            - TD19
            - TD20
            - TD21
            - TD22
            - TD23
            - TD24
            - TD25
            - TD26
            - TD27
          nullable: true
        tax_report_description:
          type: string
          maxLength: 255
          description: Description of the tax report. Sent to the tax authority.
          example: Tax report for Invoice 1
          writeOnly: true
        apply_taxes_to_charge:
          type: boolean
          description: Indicates whether taxes should be applied to the charge.
          default: false
        charge_is_reimbursable_expense:
          type: boolean
          description: |
            [Facturae/PDF Only]
            Indicates whether the charge is a reimbursable expense, which is a cost incurred on behalf of the contact that will be reimbursed. Taxes cannot be applied to a reimbursable expense, `apply_taxes_to_charge` must be `false`.
          default: false
        contact_email_override:
          type: string
          maxLength: 200
          description: List of destination emails, separated by commas.
          writeOnly: true
          example: john_doe@example.net, jane_doe@example.net
        company_email_override:
          type: string
          maxLength: 200
          description: Your email
          writeOnly: true
          example: john_doe_override@example.net
        receiver_contract_reference:
          type: string
          maxLength: 255
          description: Assignment code
          writeOnly: true
          example: '123'
        dire:
          type: string
          maxLength: 16
          description: Receiver code (DIRe)
          writeOnly: true
          example: ES12345678
        fa_address:
          type: string
          maxLength: 160
          description: Factoring assignment - Address
          writeOnly: true
          example: Invented address, 1
        fa_bank_code:
          type: string
          maxLength: 30
          description: Factoring assignment - Bank code
          writeOnly: true
          example: ES6000000000000000000000
        fa_bic:
          type: string
          description: Factoring assignment - BIC
          writeOnly: true
          example: '123'
        fa_clauses:
          type: string
          maxLength: 65535
          description: Factoring assignment - Assignment clause
          writeOnly: true
          example: Clauses
        fa_country:
          type: string
          maxLength: 2
          description: Factoring assignment - Country
          writeOnly: true
          example: ES
        fa_duedate:
          type: string
          format: date
          description: Factoring assignment - Due date
          writeOnly: true
          example: '2024-09-12'
        fa_iban:
          type: string
          maxLength: 40
          description: Factoring assignment - IBAN
          writeOnly: true
          example: ES6000000000000000000000
        fa_import:
          type: number
          format: float
          description: Factoring assignment - Amount
          writeOnly: true
          example: 100
        fa_info:
          type: string
          maxLength: 70
          description: Factoring assignment - Information
          writeOnly: true
          example: Information
        fa_name:
          type: string
          maxLength: 60
          description: Factoring assignment - Name
          writeOnly: true
          example: Name
        fa_payment_method:
          type: string
          maxLength: 2
          description: Factoring assignment - Payment method
          writeOnly: true
          example: '2'
        fa_person_type:
          type: string
          maxLength: 1
          description: Factoring assignment - Entity type
          writeOnly: true
          example: J
        fa_postcode:
          type: string
          maxLength: 10
          description: Factoring assignment - Postcode
          writeOnly: true
          example: '80808'
        fa_province:
          type: string
          maxLength: 60
          description: Factoring assignment - Province
          writeOnly: true
          example: Barcelona
        fa_residence_type:
          type: string
          maxLength: 1
          description: Factoring assignment - Residence type
          writeOnly: true
        fa_taxcode:
          type: string
          maxLength: 20
          description: Factoring assignment - VAT ID number
          writeOnly: true
          example: ES12345678
        fa_town:
          type: string
          maxLength: 50
          description: Factoring assignment - City
          writeOnly: true
          example: Barcelona
        accounting_unit:
          type: string
          maxLength: 16
          description: Accounting unit
          writeOnly: true
          example: ES00000000
        managing_unit:
          type: string
          maxLength: 16
          description: Managing unit
          writeOnly: true
          example: ES00000000
        proponent_unit:
          type: string
          maxLength: 16
          description: Proponent unit
          writeOnly: true
          example: ES00000000
        special_regime_key:
          type: string
          enum:
            - '01'
            - '02'
            - '03'
            - '04'
            - '05'
            - '06'
            - '07'
            - '08'
            - '09'
            - '10'
            - '11'
            - '12'
            - '13'
            - '14'
            - '15'
            - '51'
            - '52'
            - '53'
          description: |
            Keys to the VAT regime and operations with tax significance
             * `01` - General Regime Operation
             * `02` - Export
             * `03` - Operations to which the special regime for used goods, objects of art, antiques and collectibles applies
             * `04` - Special investment gold regime
             * `05` - Special scheme for travel agents
             * `06` - Special regime group of entities in VAT
             * `07` - Special cash criterion regime
             * `08` -  Operations subject to the IPSI / IGIC
             * `09` - Invoicing of the provision of services of travel agencies that act as mediators on behalf of and on behalf of another
             * `10` - Collections on behalf of third parties of professional fees or rights derived from industrial property, copyright or others on behalf of its partners, associates or collegiate members made by companies, associations, professional associations or other entities that perform these collection functions.
             * `11` - Leasing operations of business premises subject to withholding
             * `12` - Business premises lease operations not subject to withholding
             * `13` - Leasing operations of business premises subject and not subject to withholding
             * `14` - Invoice with VAT pending accrual in work certifications whose recipient is a Public Administration
             * `15` - Invoice with VAT pending accrual in successive tract operations
             * `51` - Operations in equivalence surcharge
             * `52` - Operations in simplified regime
             * `53` - Operations carried out by persons or entities that are not considered businessmen, businesswomen or professionals for VAT purposes
          writeOnly: true
          example: '01'
        special_regime_key_additional:
          type: string
          enum:
            - '01'
            - '02'
            - '03'
            - '04'
            - '05'
            - '06'
            - '07'
            - '08'
            - '09'
            - '10'
            - '11'
            - '12'
            - '13'
            - '14'
            - '15'
            - '51'
            - '52'
            - '53'
          description: |
            Keys to the VAT regime and operations with tax significance
             * `01` - General Regime Operation
             * `02` - Export
             * `03` - Operations to which the special regime for used goods, objects of art, antiques and collectibles applies
             * `04` - Special investment gold regime
             * `05` - Special scheme for travel agents
             * `06` - Special regime group of entities in VAT
             * `07` - Special cash criterion regime
             * `08` -  Operations subject to the IPSI / IGIC
             * `09` - Invoicing of the provision of services of travel agencies that act as mediators on behalf of and on behalf of another
             * `10` - Collections on behalf of third parties of professional fees or rights derived from industrial property, copyright or others on behalf of its partners, associates or collegiate members made by companies, associations, professional associations or other entities that perform these collection functions.
             * `11` - Leasing operations of business premises subject to withholding
             * `12` - Business premises lease operations not subject to withholding
             * `13` - Leasing operations of business premises subject and not subject to withholding
             * `14` - Invoice with VAT pending accrual in work certifications whose recipient is a Public Administration
             * `15` - Invoice with VAT pending accrual in successive tract operations
             * `51` - Operations in equivalence surcharge
             * `52` - Operations in simplified regime
             * `53` - Operations carried out by persons or entities that are not considered businessmen, businesswomen or professionals for VAT purposes
          writeOnly: true
          example: '01'
        contract_unit:
          type: string
          maxLength: 110
          description: Contracting Unit / SEF
          writeOnly: true
          example: Contracting Unit
        processing_unit:
          type: string
          maxLength: 16
          description: Processing unit.
          writeOnly: true
          example: Processing Unit
        amend_code_tax:
          type: string
          enum:
            - R1
            - R2
            - R3
            - R4
            - R5
          description: |
            Code of credit note (only needed for tax reports)
             * `R1` - Error founded in law and Art. 80 One, Two and Six of the Foral VAT Regulation
             * `R2` - Article 80 Three of the Foral VAT Regulationial
             * `R3` - Article 80 Four of the Foral VAT Regulation
             * `R4` - Rest
             * `R5` - Corrective invoice in simplified invoices
          writeOnly: true
          example: R1
        type_operation:
          type: string
          enum:
            - services
            - goods
          description: Type of operation (needed for tax reports)
          writeOnly: true
          example: services
        document_type_code:
          allOf:
            - $ref: '#/components/schemas/DocumentTypeCode'
            - description: |
                Code identifying the document format used to send the invoice.
                For received invoices, this corresponds to the format of the original document.
            - readOnly: true
    ProjectInInvoice:
      type: object
      description: Account object as it appears in invoice responses
      readOnly: true
      properties:
        id:
          type: integer
          example: 12345
          description: Account ID
        name:
          type: string
          example: My Company S.L.
          description: Account name
    CompanyInInvoice:
      type: object
      description: Company object as it appears in invoice responses
      readOnly: true
      properties:
        id:
          type: integer
          example: 12345
          description: Company ID
        name:
          type: string
          example: My Company S.L.
          description: Company name
        tin_value:
          type: string
          description: |
            VAT identifier
            ID: `BT-31` if the company is the Seller Party (in case to be a IssuedInvoice). ID: `BT-48` if the company is the Buyer Party (in case to be a ReceivedInvoice).
          maxLength: 255
          example: ESA13585625
        tin_scheme:
          type: string
          description: |
            The scheme identifier of VAT Number
            You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
          example: '9920'
        address:
          type: string
          example: Carrer Example 123
          description: Company address
          nullable: true
        address2:
          type: string
          example: Floor 2
          description: Company secondary address
          nullable: true
        postalcode:
          type: string
          example: 8001
          description: Company postal code
          nullable: true
        city:
          type: string
          example: Barcelona
          description: Company city
          nullable: true
        province:
          type: string
          example: Barcelona
          description: Company province
          nullable: true
        country:
          type: string
          example: es
          description: Company country
          nullable: true
    ContactInInvoice:
      type: object
      description: Contact object as it appears in invoice responses
      readOnly: true
      properties:
        id:
          type: integer
          example: 133842
          description: Contact ID
        name:
          type: string
          example: Client Name
          description: Contact name
        tin_value:
          type: string
          description: |
            The Buyer's VAT identifier (also known as Buyer VAT identification number).

            ID: `BT-48`
          maxLength: 255
          example: ESA13585625
        tin_scheme:
          type: string
          description: |
            The scheme identifier of Company VAT Number
            You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
          nullable: true
          example: '9920'
        address:
          type: string
          example: Carrer Example 123
          description: Contact address
          nullable: true
        address2:
          type: string
          example: Floor 2
          description: Contact secondary address
          nullable: true
        postalcode:
          type: string
          example: 8001
          description: Contact postal code
          nullable: true
        city:
          type: string
          example: Barcelona
          description: Contact city
          nullable: true
        province:
          type: string
          example: Barcelona
          description: Contact province
          nullable: true
        country:
          type: string
          example: es
          description: Contact country
          nullable: true
        email:
          type: string
          description: |
            An e-mail address for the contact point.

            ID: `BT-58`
          writeOnly: true
          example: example@email.com
        pin_value:
          type: string
          description: |
            Peppol Identifier Number, identifies the Buyer's electronic address to which the invoice is delivered.

            ID: `BT-49`
          example: '987654321'
          nullable: true
        pin_scheme:
          type: string
          description: |
            The identification scheme identifier of the Buyer electronic address.

            You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`). The value has to be in EAS code list
            https://docs.peppol.eu/poacc/billing/3.0/codelist/eas/
          example: '0192'
          nullable: true
        party_identification:
          type: string
          example: '506001234999'
          description: Party identification
          nullable: true
    InvoiceResponse:
      allOf:
        - $ref: '#/components/schemas/Invoice'
        - type: object
          description: Invoice object as returned by V2 API with nested objects
          properties:
            account:
              $ref: '#/components/schemas/ProjectInInvoice'
              nullable: true
              description: Associated account information
            company:
              $ref: '#/components/schemas/CompanyInInvoice'
              nullable: true
              description: Company information
            contact:
              $ref: '#/components/schemas/ContactInInvoice'
              nullable: true
              description: Contact information
            error_message:
              type: string
              readOnly: true
              nullable: true
              description: Error message if invoice is in error state
              example: Connection timeout to network provider
            cancellation_state:
              type: string
              readOnly: true
              nullable: true
              description: Cancellation state for cancelled invoices
            created_at:
              type: string
              format: date-time
              readOnly: true
              description: Invoice creation timestamp
              example: '2024-07-07T11:51:57Z'
            updated_at:
              type: string
              format: date-time
              readOnly: true
              description: Invoice last update timestamp
              example: '2024-07-07T11:51:57Z'
            state_updated_at:
              type: string
              format: date-time
              readOnly: true
              description: Invoice state last update timestamp
              example: '2024-07-07T11:51:57Z'
    CardAccountUpdate:
      allOf:
        - $ref: '#/components/schemas/CardAccountCommon'
        - type: object
          properties:
            id:
              type: integer
              description: A unique identifier for this CardAccount across all the system.
              readOnly: false
            _destroy:
              type: integer
              description: |
                Deletes the card account of the invoice 
                To delete the card account, set this field to `1`. If set to `0` or null, no action is taken.
              example: 1
              nullable: true
              writeOnly: true
              enum:
                - 1
                - 0
    InvoiceUpdate:
      allOf:
        - $ref: '#/components/schemas/Invoice'
        - type: object
          properties:
            iban:
              writeOnly: false
              readOnly: true
            bic:
              writeOnly: false
              readOnly: true
            bank_account:
              readOnly: true
            card_account_attributes:
              description: |
                Represents the card account of the customer party.
                Use this field to update/create the card account for this invoice.
              type: object
              allOf:
                - $ref: '#/components/schemas/CardAccountUpdate'
            contact:
              readOnly: true
            invoice_lines_attributes:
              type: array
              items:
                allOf:
                  - $ref: '#/components/schemas/InvoiceLine'
                  - type: object
                    properties:
                      id:
                        type: integer
                        description: Unique identifier for the invoice line to update. Do not inform when creating a new line.
                        readOnly: false
                      _destroy:
                        type: integer
                        description: |
                          Marks an existing invoice line for deletion.
                          To delete a line, set this field to `1` and provide the `id` field. If the `id` field is missing or not provided, the deletion will not occur. If set to `0` or null, no action is taken.
                        example: 1
                        nullable: true
                        writeOnly: true
                        enum:
                          - 1
                          - 0
    InvoiceReduced:
      type: object
      description: Represents an invoice with reduced fields as an object
      properties:
        id:
          type: integer
          example: 4053100
          description: |
            A unique internal identifier of the Invoice in B2Brouter.
          readOnly: true
        type:
          type: string
          description: Invoice type
          example: IssuedInvoice
          enum:
            - IssuedInvoice
            - ReceivedInvoice
            - IssuedSelfInvoice
            - IssuedSimplifiedInvoice
          default: IssuedInvoice
        number:
          type: string
          example: '3'
          description: |
            A unique identification of the Invoice.

            ID: `BT-1`
          maxLength: 100
        file_reference:
          type: string
          description: |
            The identification of the project the invoice refers to.

            ID: `BT-11`
          maxLength: 255
          example: PID33
          nullable: true
        series_code:
          type: string
          example: S01
          description: |
            The series code of the Invoice.
        date:
          type: string
          format: date
          description: |
            The date when the Invoice was issued.

            ID: `BT-2`
          example: '2020-11-12'
        due_date:
          type: string
          format: date
          description: |
            The date when the payment is due.

            ID: `BT-9`
          example: '2021-01-04'
          nullable: true
        contact:
          type: object
          nullable: true
          readOnly: true
          properties:
            id:
              type: integer
              example: 326116
              description: Contact ID
            name:
              type: string
              example: John Doe
              description: Name of the client or provider
            tin_value:
              type: string
              description: |
                The Buyer's VAT identifier (also known as Buyer VAT identification number).

                ID: `BT-48`
              maxLength: 255
              example: ESA13585625
            tin_scheme:
              type: string
              description: |
                The scheme identifier of Company VAT Number
                You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
              nullable: true
              example: '9920'
        state:
          $ref: '#/components/schemas/StateOutput'
        total:
          type: number
          format: float
          example: 363.5
          readOnly: true
        currency:
          type: string
          example: EUR
          description: |
            "The currency in which all Invoice amounts are given, except for the Total VAT amount in accounting currency."

            ID: `BT-5`
          maxLength: 3
        created_at:
          type: string
          format: datetime
          description: A datetime when the object was created in B2Brouter
          example: '2020-07-06T09:36:18Z'
          readOnly: true
        updated_at:
          type: string
          format: datetime
          description: A datetime of the last time the invoice was updated.
          example: '2020-07-06T09:36:18Z'
          readOnly: true
        state_updated_at:
          type: string
          format: datetime
          example: '2020-07-06T09:36:18Z'
          description: A datetime of the last time the state of the invoice was changed.
          readOnly: true
          nullable: true
        from_net_id:
          type: string
          readOnly: true
          nullable: true
          example: '123'
        from_net_meta:
          type: string
          readOnly: true
          nullable: true
          example: '123'
        to_net_id:
          type: string
          readOnly: true
          nullable: true
          example: '123'
    SendAfterImport:
      type: boolean
      default: false
      example: true
      enum:
        - true
        - false
      description: |
        A flag to indicate whether the invoice should be sent after import. The invoice will only be sent if it passes all validations.
        **Note:** This option is incompatible with the custom signature configuration.
    Ack:
      type: boolean
      default: false
      description: Mark the invoice as acknowledged.
    StateInput:
      type: string
      example: refused
      writeOnly: true
      enum:
        - new
        - sent
        - accepted
        - registered
        - refused
        - closed
        - paid
        - annotated
      description: |
        Valid states for an issued invoice:
         * `new` - The initial status of an issued invoice.
         * `sent` - The invoice has been sent successfully.
         * `accepted` - When the invoice is marked as accepted.
         * `registered` -  When a registered notification has been received or manually marked as registered.
         * `refused` - When a refused notification has been received or manually marked as refused.
         * `closed` - Is a final state.

        Valid states for a received invoice:
         * `new` - The initial status of an issued invoice or the invoice is manually marked as new.
         * `paid` - When the invoice has been paid or the invoice is marked manually as paid.
         * `accepted` - When the invoice is marked as accepted.
         * `refused` - When the invoice is marked as refused.
         * `annotated` - When the invoice is marked annotated.

        Valid states for an issued simplified invoice:
         * `new` - The initial status of an issued simplified invoice.
         * `sent` - The invoice has been sent successfully.
         * `closed` - Is a final state.

        Valid states for an issued self-invoice:
         * `paid` - When the invoice has been paid or the invoice is marked manually as paid.
         * `accepted` - When the invoice is marked as accepted.
         * `registered` -  When a registered notification has been received or manually marked as registered.
         * `closed` - Is a final state.
    InvoiceMarkAsCommit:
      type: string
      description: |
        Used to send notification of the state chan via mail to the contact.
        Only for Received Invoices and for states 'accepted', 'refused' & 'paid'.
      example: with_mail
      enum:
        - with_mail
    InvoiceMarkAsReason:
      type: string
      example: Write here the reason of the state change, if you want.
      description: |
        To annotate the reason of the state change, if commit is 'with_mail',
        and the new state is 'accepted', 'refused' or 'paid', the reason will be
        included in the mail sent to the contact.
    ErrorItem:
      type: string
      description: Error message
      example: The invoice cannot be marked as new
    Attachment:
      type: object
      description: Represents an attachment as an object
      properties:
        filename:
          type: string
          example: minimal.pdf
    ErrorMessage:
      type: object
      description: Represents an error message as an object
      properties:
        message:
          type: string
          example: Expected attachments to be a ZIP file, found .pdf
    TaxReportGenerated:
      type: object
      description: Response after generating a tax report
      properties:
        id:
          type: integer
          example: 123
      xml:
        name: tax_report
    DocumentValidation:
      type: object
      description: Represents a document validation as an object
      properties:
        validation_result:
          type: object
          description: Contains the information result about the document's validation.
          properties:
            info:
              type: object
              description: Metadata about the validated document.
              properties:
                document_type_code:
                  type: string
                  example: xml.ubl.invoice.bis3
                  description: The document type code of the validated document. If the document type cannot be defined, the value is 'unknown'.
                model:
                  type: string
                  example: Invoice
                  description: Indicates the type of business document that was validated. If the document is not well formed, the value is 'unknown'.
                  enum:
                    - Invoice
                    - ApplicationResponse
                    - DespatchAdvice
                    - Order
                    - OrderResponse
                    - Ledger
                    - TaxReport
                    - unknown
            status:
              type: string
              example: invalid
              enum:
                - valid
                - invalid
                - valid_with_warnings
              description: |
                Status validation of the validated document.
                - If xsd or sch are ´invalid,´ the global status will be ´invalid´.
                - If sch is ´valid_with_warnings´, the global status will be ´valid_with_warnings´.
                - If xsd and sch are ´valid´, the global status will be ´valid´.
            xsd:
              type: object
              description: Representation of the xsd validation.
              properties:
                status:
                  type: string
                  example: invalid
                  enum:
                    - valid
                    - invalid
                    - not_applicable
                  description: Validity status of document validation against the syntax schema (XSD).
                errors:
                  type: array
                  items:
                    type: object
                    description: Representation of an xsd error
                    properties:
                      message:
                        type: string
                        example: 'Element ''ProfileI'': This element is not expected. Expected is one of ( ProfileID, ProfileExecutionID, ID ).'
                        description: Description of the error encountered
            sch:
              type: object
              description: Representation of the sch validation.
              properties:
                status:
                  type: string
                  example: valid_with_warnings
                  enum:
                    - valid
                    - invalid
                    - valid_with_warnings
                    - not_applicable
                  description: Validity status of document validation against the business rules (Schematrons).
                schematrons:
                  type: array
                  example:
                    - CEN-EN16931-UBL.sch
                    - PEPPOL-EN16931-UBL.sch
                  description: Schematrons used to validate the document.
                  items:
                    type: string
                errors:
                  type: array
                  items:
                    type: object
                    description: Representation of an sch error
                    properties:
                      code:
                        type: string
                        example: SE-R-005
                        description: Schematron rule code with which the error was found
                      category:
                        type: string
                        example: PEPPOL-EN16931-UBL.sch
                        description: Schematron model with which the error was found
                      message:
                        type: string
                        example: For Swedish suppliers, when using Seller tax registration identifier, 'Godkänd för F-skatt' must be stated
                        description: Description of the error encountered
                      property_path:
                        type: string
                        example: Invoice/AccountingSupplierParty/Party/PartyTaxScheme/CompanyID
                        description: Path of the property that has given the error
                warnings:
                  type: array
                  items:
                    type: object
                    description: Representation of an sch warning
                    properties:
                      code:
                        type: string
                        example: SE-R-013
                        description: Schematron rule code with which the warning was found
                      category:
                        type: string
                        example: PEPPOL-EN16931-UBL.sch
                        description: Schematron model with which the warning was found
                      message:
                        type: string
                        example: The last digit of a Swedish organization number must be valid according to the Luhn algorithm.
                        description: Description of the warning encountered
                      property_path:
                        type: string
                        example: Invoice/AccountingSupplierParty/Party/PartyLegalEntity
                        description: Path of the property that has given the warning
    OrderId:
      type: integer
      example: 4053100
      title: Order ID
      description: Unique identifier of the **Order** in B2Brouter.
      readOnly: true
    OrderLine:
      type: object
      description: A group of business terms providing information on individual Order lines.
      properties:
        position:
          type: integer
          example: 1
          description: position
          writeOnly: true
        name:
          type: string
          example: Item name
          description: Item name.
          maxLength: 65535
        description:
          type: string
          example: Item description
          description: Item description.
          maxLength: 65535
        quantity:
          type: number
          format: decimal
          example: 1
          description: Item quantity.
          maxLength: 255
        unit_code:
          type: string
          description: Item quantity unit code.
          maxLength: 65535
          example: '1'
        price:
          type: number
          format: decimal
          example: 33.3
          description: The price of an item, exclusive of VAT,after subtracting item price discount.
          maxLength: 255
        total_cost:
          type: number
          format: decimal
          example: 33.3
          description: Price * Quantity
          maxLength: 255
          readOnly: true
        sellers_item_id:
          type: string
          example: BB12KG
          description: Sellers item identifier.
          maxLength: 255
        additional_item_properties:
          type: object
          description: Additional item properties.
          readOnly: true
        standard_item_identification:
          type: string
          description: Standard item identification.
          maxLength: 255
          example: Item identification
        item_document_reference:
          type: string
          description: Item document reference.
          maxLength: 255
          example: Item reference
        delivery_date_start:
          type: string
          format: date
          example: '2020-11-01'
          description: Order line delivery start date.
          maxLength: 255
        delivery_date_end:
          type: string
          format: date
          example: '2020-11-20'
          description: Order line delivery end date.
          maxLength: 255
        note:
          type: string
          example: Note
          description: A note for an order line.
          maxLength: 255
    Order:
      type: object
      description: Represents an order as an object
      properties:
        id:
          $ref: '#/components/schemas/OrderId'
        account:
          type: object
          properties:
            id:
              type: integer
              example: 742
              description: Account ID
            name:
              type: string
              example: B2Brouter Global, S.L.
              description: Account Name
          readOnly: true
        company:
          type: object
          properties:
            id:
              type: integer
              example: 326116
              description: Company ID
            name:
              type: string
              example: John Doe
              description: Name of the client or provider
            tin_value:
              type: string
              description: |
                VAT identifier
                ID: `BT-48`
              example: ESA13585625
            tin_scheme:
              type: string
              description: |
                The scheme identifier of VAT Number
                You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
              example: '9920'
          readOnly: true
        contact:
          type: object
          description: Represents a contact as an object
          properties:
            id:
              type: integer
              example: 326116
              description: Contact ID
            name:
              type: string
              example: John Doe
              description: Name of the client or provider
            tin_value:
              type: string
              description: |
                VAT identifier
                ID: `BT-48`
              example: ESA13585625
            tin_scheme:
              type: string
              description: |
                The scheme identifier of VAT Number
                You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
              example: '9920'
            address:
              type: string
              description: Address
              maxLength: 255
              nullable: true
              example: Carrer de Sant Antoni, 12
            address2:
              type: string
              description: Address 2
              maxLength: 255
              nullable: true
              example: Carrer de Sant Antoni, 13
            postalcode:
              type: string
              example: '80808'
              description: Postcode
              maxLength: 255
              nullable: true
            city:
              type: string
              example: Barcelona
              description: City
              maxLength: 255
              nullable: true
            province:
              type: string
              example: Barcelona
              description: Region/Province/County
              maxLength: 255
              nullable: true
            country:
              type: string
              example: es
              description: Country
              maxLength: 255
          readOnly: true
        accounting_party:
          type: object
          description: Represents an accounting party as an object
          properties:
            id:
              type: integer
              example: 326116
              description: Contact ID
            name:
              type: string
              example: John Doe
              description: Name of the client or provider
            tin_value:
              type: string
              description: |
                VAT identifier
                ID: `BT-48`
              example: ESA13585625
            tin_scheme:
              type: string
              description: |
                The scheme identifier of VAT Number
                You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
              example: '9920'
            address:
              type: string
              description: Address
              maxLength: 255
              nullable: true
              example: Carrer de Sant Antoni, 14
            address2:
              type: string
              description: Address 2
              maxLength: 255
              nullable: true
              example: Carrer de Sant Antoni, 15
            postalcode:
              type: string
              example: '80808'
              description: Postcode
              maxLength: 255
            city:
              type: string
              example: Barcelona
              description: City
              maxLength: 255
              nullable: true
            province:
              type: string
              example: Barcelona
              description: Region/Province/County
              maxLength: 255
              nullable: true
            country:
              type: string
              example: es
              description: Country
              maxLength: 255
          readOnly: true
        number:
          type: string
          example: '3'
          description: |
            A unique identification of the Order.
          maxLength: 100
        issue_datetime:
          type: string
          format: datetime
          description: A datetime when the order was issued.
          example: '2020-07-06T09:36:18Z'
          readOnly: true
        currency:
          type: string
          example: EUR
          description: The currency in which all Invoice amounts are given, except for the Total VAT amount in accounting currency.
          maxLength: 3
          nullable: true
        validity_start:
          type: string
          format: date
          description: Validity start
          example: '2020-11-01'
          nullable: true
        validity_end:
          type: string
          format: date
          description: Validity end
          example: '2020-12-01'
          nullable: true
        contract:
          type: string
          example: Contract
          description: Contract
          maxLength: 255
          nullable: true
        type_code:
          type: string
          example: Type code
          description: Type code
          maxLength: 255
          nullable: true
        state:
          type: string
          description: State of order
          example: received
          maxLength: 255
        is_confirmation:
          type: boolean
          default: false
          example: true
          enum:
            - true
            - false
          description: Is confirmation
        anticipated_amount_in_cents:
          type: integer
          example: 3330
          description: Anticipated amount in cents.
          readOnly: true
        invoice_id:
          type: integer
          example: 4053100
          description: A unique internal identifier of the Invoice in B2Brouter.
          readOnly: true
          nullable: true
        delivery_date_start:
          type: string
          format: date
          description: Delivery date start
          example: '2020-11-01'
          nullable: true
        delivery_date_end:
          type: string
          format: date
          description: Delivery date end
          example: '2020-11-12'
          nullable: true
        delivery_address:
          type: string
          example: Address 1
          description: Delivery address 1
          maxLength: 255
          nullable: true
        delivery_address2:
          type: string
          example: Address 2
          description: Delivery address 2
          maxLength: 255
          nullable: true
        delivery_address3:
          type: string
          example: Address 3
          description: Delivery address 3
          maxLength: 255
          nullable: true
        delivery_city:
          type: string
          example: Barcelona
          description: Delivery city
          maxLength: 255
          nullable: true
        delivery_postalcode:
          type: string
          example: '80808'
          description: Delivery postal code
          maxLength: 255
          nullable: true
        delivery_province:
          type: string
          example: Barcelona
          description: Region/Province/County
          maxLength: 255
          nullable: true
        delivery_country:
          type: string
          example: es
          description: Delivery country
          maxLength: 255
          nullable: true
        delivery_party_id:
          type: string
          example: '111'
          description: Delivery party id
          maxLength: 255
          nullable: true
        delivery_party_scheme:
          type: string
          example: '9920'
          description: Delivery party scheme
          maxLength: 255
          nullable: true
        delivery_party_name:
          type: string
          example: Delivery party name
          description: Delivery party name
          maxLength: 255
          nullable: true
        delivery_location_id:
          type: string
          example: '111'
          description: Delivery location id
          maxLength: 255
          nullable: true
        delivery_location_name:
          type: string
          example: Delivery party name
          description: Delivery location name
          maxLength: 255
          nullable: true
        originator_id:
          type: string
          example: '111'
          description: Originator id
          maxLength: 255
          nullable: true
        originator_name:
          type: string
          example: Originator name
          description: Originator name
          maxLength: 255
          nullable: true
        buyer_contact_name:
          type: string
          example: Buyer contac name
          description: Buyer contac name
          maxLength: 255
          nullable: true
        buyer_contact_phone:
          type: string
          example: '6666666666'
          description: Phone
          maxLength: 255
          nullable: true
        buyer_contact_email:
          type: string
          example: john.doe@example.com
          description: Email
          maxLength: 255
          nullable: true
        notes:
          type: string
          example: Notes
          nullable: true
        order_format:
          type: string
          example: ubl
          nullable: true
        additional_document_references:
          type: object
          description: Additional Order references.
          readOnly: true
          nullable: true
        order_lines:
          type: array
          description: |
            A group of business terms providing information on individual order lines.
          items:
            $ref: '#/components/schemas/OrderLine'
          readOnly: true
        attachments:
          type: array
          description: |
            A group of business terms providing information on attachments.
          items:
            type: object
            properties:
              link:
                type: string
                example: /attachments/download/1/order.xml
              content_type:
                type: string
                example: text/xml
          readOnly: true
        created_at:
          type: string
          format: datetime
          description: A datetime when the object was created in B2Brouter.
          example: '2020-07-06T09:36:18Z'
          readOnly: true
        updated_at:
          type: string
          format: datetime
          description: A datetime of the last time the invoice was updated.
          example: '2020-07-06T09:36:18Z'
          readOnly: true
    OrderState:
      type: string
      example: received
      enum:
        - delivery_confirmed
        - closed
        - accepted
        - refused
        - received
      description: |
        Some states for an order:
         * `delivery_confirmed` - When the order is marked as the order has been confirmed.
         * `closed` - When the order is marked as closed.
         * `accepted` - When the order is marked as accepted.
         * `refused` - When the order is marked as refused.
         * `received` - The initial status of an order or when the order is marked as received.
    Contact:
      type: object
      description: Represents a contact as an object
      properties:
        id:
          type: integer
          example: 133842
          readOnly: true
          description: Internal ID
        tin_value:
          type: string
          description: |
            VAT identifier
            ID: `BT-48`
          maxLength: 255
          example: ESA13585625
        tin_scheme:
          type: string
          description: |
            The scheme identifier of VAT Number
            You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
          example: '9920'
        name:
          type: string
          example: Contact1
          description: Name
          maxLength: 255
        email:
          type: string
          example: mail@contact1.com
          description: Email
          maxLength: 255
        phone:
          type: string
          example: '6666666666'
          description: Phone
          maxLength: 255
          nullable: true
        website:
          type: string
          description: Website
          maxLength: 255
          nullable: true
          example: https://www.contact1.com
        address:
          type: string
          description: Address
          maxLength: 255
          nullable: true
          example: Invented Address, 1
        address2:
          type: string
          description: Address 2
          maxLength: 255
          nullable: true
          example: Invented Address, 2
        postalcode:
          type: string
          example: '80808'
          description: Postcode
          maxLength: 255
        city:
          type: string
          example: Barcelona
          description: City
          maxLength: 255
          nullable: true
        province:
          type: string
          example: Barcelona
          description: Region/Province/County
          maxLength: 255
          nullable: true
        country:
          type: string
          example: es
          description: Country
          maxLength: 255
        language:
          type: string
          example: es
          default: en
          description: |
            Contact language. It should be a language available inside B2Brouter.
            You can check all available languages  using the **Languages** endpoint in Code lists section (`/languages`)
          enum:
            - en
            - es
            - ca
            - fr
            - it
            - de
            - pt
            - nl
            - pl
            - da
            - sv
            - ar
          maxLength: 2
        currency:
          type: string
          example: EUR
          description: |
            Default currency for the electronic documents related to this contact.
            You can check all supported currencies using the **Currencies** endpoint in Code lists section (`/currencies`)
          maxLength: 255
        is_client:
          type: boolean
          description: Indicates if the contact is a client for your organisation
          default: true
        is_provider:
          type: boolean
          description: Indicates if the contact is a provider for your organisation
          default: false
        transport_type_code:
          $ref: '#/components/schemas/TransportTypeCode'
        document_type_code:
          $ref: '#/components/schemas/DocumentTypeCode'
        cin_value:
          type: string
          description: Company Identifier Number
          nullable: true
          example: '1234567890123'
        cin_scheme:
          type: string
          description: |
            The scheme identifier of Company Identifier Number (not a tax identifier number).
            You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
          nullable: true
          example: '0208'
        pin_value:
          type: string
          description: |
            Peppol Identifier Number, identifies the Buyer's electronic address to which the invoice is delivered.
          nullable: true
          example: ES123456789
        pin_scheme:
          type: string
          description: |
            The identification scheme identifier of the Buyer electronic address.

            You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`). The value has to be in EAS code list
            https://docs.peppol.eu/poacc/billing/3.0/codelist/eas/
          nullable: true
          example: '9920'
        party_identification:
          type: string
          maxLength: 12
          description: |
            Seller/Buyer identifier

            ID: `BT-29` if Contact is a Seller
            ID: `BT-46` if Contact is a Buyer
          example: '506001234999'
          nullable: true
        bank_account_number:
          type: string
          description: Contact's bank account number (do not specify if IBAN + BIC is used)
          maxLength: 24
          example: ES6000000000000000000000
        iban:
          type: string
          description: Contact's IBAN (International Bank Account Number)
          maxLength: 255
          nullable: true
          example: ES6000000000000000000000
        bic:
          type: string
          description: Contact's BIC (Bank Identifier Code)
          maxLength: 255
          nullable: true
          example: 0
        bank_account_id:
          type: integer
          description: Internal Bank Account ID used to link the bank account configured for your account, where the contact deposits payments to you.
          example: 1234
          nullable: true
        payment_method:
          type: integer
          enum:
            - 0
            - 1
            - 2
            - 3
            - 4
            - 7
            - 10
            - 11
            - 12
            - 13
            - 14
            - 15
            - 17
            - 19
            - 31
            - 54
            - 56
            - 58
            - 59
            - 101
            - 102
          example: 1
          description: |
            Payment method
             * `1` - Cash
             * `2` - Direct debit
             * `3` - Hold
             * `4` - Bank transfer
             * `7` - Awarded contract
             * `10` - Promissory note
             * `11` - Cheque
             * `12` - Reposition
             * `13` - Other
             * `14` - Compensation
             * `15` - Payment by postgiro
             * `17` - Bank cheque
             * `19` - Bank card
             * `31` - Debit transfer
             * `54` - Credit card
             * `56` - Bank giro
             * `58` - SEPA bank transfer (SCT)
             * `59` - SEPA Direct Debit (SDD)
             * `101` - GIRO
             * `102` - PayNow Corporate
          maxLength: 4
          nullable: true
        payment_method_text:
          type: string
          description: Payment method. The means, expressed as text, for how a payment is expected to be or has been settled.
          maxLength: 255
          nullable: true
          example: Credit transfer
        payment_reminder_days:
          type: integer
          description: payment_reminder_days
          maxLength: 4
          example: 4
        terms:
          type: string
          default: custom
          enum:
            - custom
            - '0'
            - '15'
            - '30'
            - '60'
            - '90'
            - '120'
            - 0m-1
            - 1m-1
            - 1m1
            - 2m1
            - 1m15
            - 1m20
            - 1m10
          description: |
            Term
            * `custom` - Custom
            * `0` - Upon Receipt
            * `15` - 15 days
            * `30` - 30 days
            * `60` - 60 days
            * `90` - 90 days
            * `120` - 120 days
            * `0m-1` - Last day this month
            * `1m-1` - Last day next month
            * `1m1` - 1st day next month
            * `2m1` - 1st day in two months
            * `1m15` - 15th day next month
            * `1m20` - 20th day next month
            * `1m10` - 10th day next month
          maxLength: 255
          nullable: true
          example: 1m1
        department:
          type: string
          description: Department
          maxLength: 255
          example: Sales
        description:
          type: string
          description: Description
          maxLength: 65535
          example: Description
        contact_person:
          type: string
          description: Contact person
          maxLength: 200
          example: John Doe
        public_sector:
          type: boolean
          description: Indicates if the contact is a public administration
          default: false
        notes:
          type: string
          description: Notes
          maxLength: 65535
          example: Notes for the contact
        brd_additional_data:
          type: string
          description: Additional data
          maxLength: 255
          example: Additional data
        vat_payability:
          type: string
          enum:
            - I
            - D
            - S
          example: I
          description: |
            VAT collection
             * `I` - Immediate
             * `D` - Deferred
             * `S` - Party
        certified_email:
          type: string
          description: |
            Used as the PEC (Posta Elettronica Certificata) address to send invoice through SDI.
            A certified email guarantees legal certainty of the sender’s identity, of the date and time of sending and receiving the email, and of its content.
          maxLength: 255
          example: certified@example.com
        recipient_code:
          type: string
          pattern: \w{6,7}
          description: |
            The recipient code is a 7-digit alphanumeric code that represents the telematic address of the electronic invoice receiver and is assigned by the SDI (Interchange System).
          maxLength: 7
          example: '1234567'
        integration_code:
          type: string
          maxLength: 255
          description: |
            Internal code of the contact in the ERP.
            It is used by B2Brouter in the integration process to assign the document to this customer
          example: contact_erpcode12345
          nullable: true
        routing_codes:
          type: object
          description: Routing codes
          properties:
            cin1_scheme:
              type: string
              nullable: true
              example: '9920'
            cin1_value:
              type: string
              nullable: true
              example: '12345678'
            cin2_scheme:
              type: string
              nullable: true
              example: '9920'
            cin2_value:
              type: string
              nullable: true
              example: '12345678'
            cin3_scheme:
              type: string
              nullable: true
              example: '9920'
            cin3_value:
              type: string
              nullable: true
              example: '12345678'
            cin4_scheme:
              type: string
              nullable: true
              example: '9920'
            cin4_value:
              type: string
              nullable: true
              example: '12345678'
            cin5_scheme:
              type: string
              nullable: true
              example: '9920'
            cin5_value:
              type: string
              nullable: true
              example: '12345678'
        created_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
          description: Date and time when the contact record was created
        updated_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
          description: Date and time when the contact record was last updated
    ContactReduced:
      type: object
      description: Contact object with reduced attributes
      properties:
        id:
          type: integer
          description: Contact ID
          example: 133842
        tin_value:
          type: string
          description: |
            The Buyer's VAT identifier (also known as Buyer VAT identification number).

            ID: `BT-48`
          maxLength: 255
          example: ESA13585625
        tin_scheme:
          type: string
          description: |
            The scheme identifier of Company VAT Number
            You can get all schemes codes using the **Schemes* endpoint in Code lists section (`/schemes`).
          example: '9920'
        name:
          type: string
          description: Name
          example: Contact 1
        country:
          type: string
          description: Country name to which the company belongs.
          example: es
        edi_code:
          type: string
          example: '11111'
        integration_code:
          type: string
          description: |
            Internal code of the contact in the ERP. 
            It is used by B2Brouter in the integration process to assign the document to this customer
          example: contact_erpcode12345
          maxLength: 255
        created_at:
          type: string
          description: Date and time when the contact record was created
          example: '2021-01-16T19:12:44Z'
          format: date-time
        updated_at:
          type: string
          description: Date and time when the contact record was last updated
          example: '2021-01-16T19:12:44Z'
          format: date-time
        contact_offices:
          type: array
          description: List of contact offices
          items:
            type: object
            properties:
              id:
                type: integer
                description: Contact's office ID
                example: 133843
              edi_code:
                type: string
                example: '22222'
              integration_code:
                type: string
                description: |
                  Internal code of the contact's office in the ERP. 
                  It is used by B2Brouter in the integration process to assign the document to this customer
                example: contact_erpcode12345
          readOnly: true
    Country:
      description: Represents a country as an object
      type: object
      properties:
        code:
          type: string
          example: fr
        name:
          type: string
          example: France
      xml:
        name: country
    Scheme:
      description: Represents a scheme as an object
      type: object
      properties:
        code:
          type: string
          example: '9920'
        name:
          type: string
          example: NIF (CIF)
        country:
          type: string
          example: es
          nullable: true
        eas:
          type: boolean
          example: 'true'
          description: Indicates whether the scheme is valid for PEPPOL identifiers (EAS - Endpoint Address Scheme). Used, for example, when publishing a PEPPOL participant.
        icd:
          type: boolean
          example: 'false'
          description: Indicates whether the scheme belongs to the ICD (International Code Designator) list. Relevant for schemes such as GLN, DUNS, and other internationally standardized identifiers.
        taxcode:
          type: boolean
          example: 'true'
          description: Indicates whether the scheme represents a tax identification code, such as a VAT number or national tax ID. Useful for validating company registration and fiscal data.
      xml:
        name: country
    Currency:
      description: Represents a currency as an object
      type: object
      properties:
        id:
          type: string
          example: eur
          description: The id of the entity.
        priority:
          type: number
          example: 2
        iso_code:
          type: string
          example: EUR
        name:
          type: string
          example: Euro
        symbol:
          type: string
          example: €
        subunit:
          type: string
          example: Cent
        subunit_to_unit:
          type: string
          example: '100'
        symbol_first:
          type: boolean
          example: true
        html_entity:
          type: string
          example: '&#x20AC;'
        decimal_mark:
          type: string
          example: ','
        thousands_separator:
          type: string
          example: .
        iso_numeric:
          type: string
          example: '987'
      xml:
        name: currency
    Language:
      description: Represents a currency as an object
      type: object
      properties:
        code:
          type: string
          example: de
        name:
          type: string
          example: Deutsch
      xml:
        name: language
    DocumentType:
      type: object
      title: Document Type
      description: Specifies the format of a specific document.
      properties:
        code:
          $ref: '#/components/schemas/DocumentTypeCode'
        name:
          type: string
          description: Name
          example: Peppol BIS3 Invoice
        document:
          type: string
          description: Document
          example: Invoice
        countries:
          type: array
          items:
            type: string
        can_export:
          type: boolean
          description: True if the document type can be sent.
          example: true
        can_import:
          type: boolean
          description: True if the document type can be received.
          example: true
    TransportType:
      type: object
      title: Transport Type
      description: Specifies the transport method of a specific document.
      properties:
        code:
          $ref: '#/components/schemas/TransportTypeCode'
        name:
          type: string
          description: Name
          example: Chorus PRO
        exportable_document_types:
          type: array
          description: The transport is capable of sending these document types.
          items:
            $ref: '#/components/schemas/DocumentTypeCode'
        importable_document_types:
          type: array
          description: The transport is capable of receiving these document types.
          items:
            $ref: '#/components/schemas/DocumentTypeCode'
        default_document_type:
          allOf:
            - $ref: '#/components/schemas/DocumentTypeCode'
            - description: Default document type.
        category:
          type: string
          description: Category
          example: pge
        country:
          type: string
          description: Country
          example: fr
        test_available:
          type: boolean
          description: Indicates if there is test environment available
          example: true
    InvoiceState:
      description: Represents a InvoiceState as an object
      type: object
      properties:
        state:
          type: string
          description: State of invoice
          example: received
        name:
          type: string
          description: State name translated
          example: Received
      xml:
        name: state
    Event:
      description: Represents an event as an object
      type: object
      properties:
        name:
          type: string
          example: delivered_notification
        text:
          type: string
          example: 'Notification: Sent Invoice'
        notes:
          type: string
          example: Description can not be blank
          description: Field that provides descriptive information about the event
        created_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
        updated_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
    InvoiceEvent:
      description: Represents an invoice event as an object
      allOf:
        - $ref: '#/components/schemas/Event'
        - type: object
          properties:
            invoice:
              type: object
              properties:
                id:
                  type: integer
                  example: 1452334
                number:
                  type: string
                  example: '54'
                state:
                  type: string
                  example: registered
                state_updated_at:
                  type: string
                  format: date-time
                  example: '2019-12-12T09:24:21Z'
      xml:
        name: event
    ContactEvent:
      allOf:
        - $ref: '#/components/schemas/Event'
        - type: object
          description: Represents an event for a contact
          properties:
            contact:
              type: object
              properties:
                id:
                  type: integer
                  example: 942
                  description: Contact ID
                name:
                  type: string
                  example: Contact name
                  description: Contact Name
    TransportB2brouter:
      type: object
      description: Represents a configuration for transport B2Brouter
      properties:
        code:
          type: string
          enum:
            - ''
            - b2brouter
        enabled:
          description: Enable or disable the transport configuration.
          type: boolean
          example: true
          default: true
        reception:
          type: boolean
          default: false
          example: true
        created_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
        updated_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
    TransportEmail:
      type: object
      description: Represents a configuration for transport Email
      properties:
        code:
          type: string
          enum:
            - ''
            - email
        enabled:
          description: Enable or disable the transport configuration.
          type: boolean
          example: true
          default: true
        reception:
          type: boolean
          example: true
          default: false
        email_for_reception:
          type: string
          example: tin@b2brouter.email
          readOnly: true
        created_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
        updated_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
    TransportPeppol:
      type: object
      description: Represents a configuration for Peppol transport
      properties:
        code:
          type: string
          enum:
            - ''
            - peppol
        enabled:
          description: Enable or disable the transport configuration.
          type: boolean
          example: true
          default: true
        reception:
          type: boolean
          default: false
          example: true
        standard_documents:
          description: |
            Manages the Peppol SMP for the Account.
            When enabled, at least one document type (invoice, credit_note, self_billing, order, or application_response) must be set to true.
            Only available for Peppol transport type.

            **Important**: The available documents may be country-specific and depend on the Account's registered country.
            Each country has different supported Peppol document format specifications (e.g., XRechnung for Germany, Factur-X for France, SI-UBL for Netherlands).

            **Note**: This setting takes precedence over any Peppol SMP configuration in https://app.b2brouter.net.
          type: boolean
          default: false
          example: true
        invoice:
          description: |
            Enables support for Invoice documents in Peppol SMP. Only available for Peppol transport type.
            **Country-specific formats**: The actual document formats published depend on the Account's country.
          type: boolean
          default: true
          example: true
        credit_note:
          description: |
            Enables support for CreditNote documents in Peppol SMP. Only available for Peppol transport type.
            **Country-specific formats**: The actual document formats published depend on the Account's country.
          type: boolean
          default: true
          example: true
        self_billing:
          description: |
            Enables support for Self-Billing Invoice and Self-Billing CreditNote documents in Peppol SMP. Only available for Peppol transport type.
          type: boolean
          default: false
          example: false
        order:
          description: |
            Enables support for Order documents in Peppol SMP. Only available for Peppol transport type.
            Uses UBL Order format regardless of country.
          type: boolean
          default: true
          example: true
        application_response:
          description: |
            Enables support for ApplicationResponse documents in Peppol SMP. Only available for Peppol transport type.
            Uses UBL Application Response v3 formats regardless of country.
          type: boolean
          default: true
          example: true
        pin_scheme:
          description: pin_scheme
          type: number
          example: 9930
        pin_value:
          description: pin_value
          type: string
          example: DE123456789
        created_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
        updated_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
    TransportUserPassword:
      type: object
      description: Represents a configuration for transport UserPassword
      properties:
        code:
          type: string
          enum:
            - ''
            - es.pecam
            - es.eusko_jaurlaritza
          example: es.pecam
        enabled:
          description: Enable or disable the transport configuration.
          type: boolean
          example: true
          default: true
        username:
          description: Username
          type: string
          example: user1234
        password:
          description: Password
          type: string
          example: 1234pass
        created_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
        updated_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
    TransportEdi:
      type: object
      description: Represents a configuration for transport EDI
      properties:
        code:
          type: string
          enum:
            - ''
            - ediversa
            - edicom
        enabled:
          description: Enable or disable the transport configuration.
          type: boolean
          example: true
          default: true
        username:
          description: Username
          type: string
          example: user1234
        password:
          description: Password
          type: string
          example: 1234pass
        edi_identifier:
          description: PO EDI legal
          type: string
          example: 1234edi
        created_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
        updated_at:
          type: string
          format: date-time
          example: '2024-07-07T11:51:57Z'
          readOnly: true
    TaxBreakdowns:
      type: object
      description: |
        Represents a TaxBreakdown, referred to as "Desglose" in the VeriFactu system. A TaxBreakdown contains all the detailed information about the tax category applied to a specific operation. It includes the tax base, the tax amount, and other relevant information necessary for tax reporting.
      properties:
        id:
          type: integer
          example: 355040
          description: |
            An internal identifier that is unique to each **Tax Breakdown** within B2Brouter.
          readOnly: true
        kind:
          type: string
          enum:
            - charged
            - withheld
          example: charged
          writeOnly: true
        date:
          type: string
          format: date
          example: '2025-04-10'
          writeOnly: true
        name:
          type: string
          example: IVA
        currency:
          type: string
          example: EUR
          writeOnly: true
        original_currency:
          type: string
          example: EUR
          writeOnly: true
        category:
          type: string
          enum:
            - E
            - NS
            - Z
            - S
            - H
            - AA
            - AAA
            - AE
            - G
            - O
            - K
          example: S
          description: |
            Taxes categories
             * `E` - Exempt
             * `NS` - NotSubject
             * `Z` - ZeroRated
             * `S` - Standard
             * `H` - High Rate
             * `AA` - Low Rate
             * `AAA` - Super Low Rate
             * `AE` - Reverse
             * `G` - Free export item, VAT not charged
             * `O` - Services outside scope of tax
             * `K` - VAT exempt for EEA intra-community supply of goods and services
        special_regime_key:
          type: string
          example: '01'
          nullable: true
          enum:
            - '01'
            - '02'
            - '03'
            - '04'
            - '05'
            - '06'
            - '07'
            - '08'
            - '09'
            - '10'
            - '11'
            - '12'
            - '13'
            - '14'
            - '15'
            - '17'
            - '19'
            - '20'
            - '51'
            - '52'
            - '53'
            - '54'
          description: |
            VAT regime key and operations with tax significance.

            - [VeriFactu codes](https://developer.b2brouter.net/docs/verifactu#special-regime-key-codes).
            - TicketBAI codes: `01`,`02`,`03`,`04`,`05`,`06`,`07`,`08`,`09`,`10`,`11`,`14`,`15`,`17`,`18`,`19`,`51`,`52`,`53`,`54`.
        non_exempt:
          type: boolean
          example: true
        non_exemption_code:
          type: string
          example: S1
          description: |
            Reason code for No Exempt. 
            [VeriFactu codes](https://developer.b2brouter.net/docs/verifactu#non-exemption-codes)
        no_subject:
          type: boolean
          example: false
          default: false
        no_subject_code:
          type: string
          nullable: true
          enum:
            - N1
            - N2
            - OT
            - RL
            - IE
            - VT
          description: |
            Reason code for No Suject. 
            - [VeriFactu codes](https://developer.b2brouter.net/docs/verifactu#non-subject-codes)
            - TicketBAI codes: `OT`, `RL`, `IE`, `VT`.

            This field is required when `no_subject` is set to true.
        exempt:
          type: boolean
          example: false
        exemption_code:
          type: string
          nullable: true
          enum:
            - E1
            - E2
            - E3
            - E4
            - E5
            - E6
          description: |
            Reason code for VAT Exemption. 
            [VeriFactu and TicketBAI codes](https://developer.b2brouter.net/docs/verifactu#exemption-codes).

            This field is required when `exempt` is set to true.
        kind_equivalence_surcharge:
          type: string
          nullable: true
          writeOnly: true
        scope:
          type: string
          enum:
            - domestic
            - international
          example: domestic
          writeOnly: true
        type_operation:
          type: string
          enum:
            - services
            - goods
          example: services
          writeOnly: true
        amend:
          type: boolean
          example: false
          writeOnly: true
        withheld:
          type: boolean
          example: false
          default: false
          writeOnly: true
        investment_good:
          type: boolean
          example: false
          default: false
          writeOnly: true
        comment:
          type: string
          nullable: true
          writeOnly: true
        percent:
          type: number
          format: decimal
          example: 21
        taxable_base:
          type: number
          format: decimal
          example: 123
        tax_amount:
          type: number
          format: decimal
          example: 25.83
        tax_amount_equivalence_surcharge:
          type: number
          format: decimal
          example: 0
          writeOnly: true
        taxable_base_at_cost:
          type: number
          format: decimal
      xml:
        name: tax_breakdown
    TaxReportLine:
      type: object
      required:
        - quantity
        - description
        - price
        - tax_inclusive_amount
      description: A group of business terms providing information on individual Tax Report lines. This is only used when creating TicketBAI Tax Reports.
      properties:
        id:
          type: integer
          example: 435453
          description: A unique identifier for this TaxReportLine across all the system.
          readOnly: true
        quantity:
          type: number
          format: decimal
          description: Invoiced quantity.
          example: 1
        price:
          type: number
          format: decimal
          description: The price of an item, exclusive of VAT.
          example: 10
        description:
          type: string
          description: Item Name.
          maxLength: 65535
          nullable: true
          example: Item 1
        discount_amount:
          type: number
          format: decimal
          nullable: true
          description: Discount amount.
          example: 1
        charge_amount:
          type: number
          format: decimal
          description: Charge amount.
          nullable: true
          example: 4
        tax_inclusive_amount:
          type: number
          format: decimal
          description: The total amount of the line including taxes.
          example: 121
        tax_exclusive_amount:
          type: number
          format: decimal
          description: The total amount of the line excluding taxes.
          example: 100
        tax_amount:
          type: number
          format: decimal
          description: The total tax amount of the line.
          example: 21
    TaxReport:
      type: object
      description: Represents a TaxReport object, such as the ones generated by Verifactu
      properties:
        id:
          type: integer
          example: 6560
          description: |
            An internal identifier that is unique to each **Tax report** within B2Brouter.
        type:
          type: string
          example: Verifactu
          enum:
            - Verifactu
            - TicketBai
            - Sdi
            - MyInvois
            - Zatca
        invoice_id:
          type: integer
          example: 77
          description: |
            An internal identifier that is unique to each **Invoice** within B2Brouter.
        state:
          type: string
          example: registered
          enum:
            - new
            - processing
            - signed
            - sending
            - sent
            - registered
            - error
            - invalid
          description: |
            States for a Tax Report:
              * `new` - The TaxReport is created and validated, ready for further actions.
              * `processing` - Initial state of a TaxReport. The report is being signed and validated.
              * `sined` - The report is signed and validated and ready for transmission.
              * `sending` - The report is in the queue for transmission.
              * `sent`  - The report was successfully transmitted.
              * `registered` - The TaxReport has been registered by the Tax Authority.
              * `error` - There was an error during submission, or it was rejected by the Tax Authority.
              * `invalid` - The report failed validation checks.
          readOnly: true
        qr:
          type: string
          description: |
            The QR code codified in base64 of the tax report.
          readOnly: true
        xml_base64:
          type: string
          description: |
            The XML representation of the tax report codified in base64.
          readOnly: true
        identifier:
          type: string
          description: |
            Unique identifier for the tax report, usually assigned or provided by the Tax Authority.
            In the case of Verifactu, this field contains the URL hosted by the AEAT that allows the Buyer to check
            that the invoice has been properly submitted to the TA.
          readOnly: true
        fingerprint:
          type: string
          description: |
            The unique hash that identifies the tax report.
          readOnly: true
        previous_id:
          type: integer
          example: 6560
          description: |
            Internal identifier of the **Tax report** in the previous link of the chain.
          readOnly: true
        sent_at:
          type: string
          format: date-time
          example: '2025-04-10T10:14:31Z'
          nullable: true
          readOnly: true
        digested_at:
          type: string
          format: date-time
          example: '2025-04-10T10:14:31Z'
          nullable: true
          readOnly: true
        created_at:
          type: string
          format: date-time
          example: '2025-04-10T10:14:21.157690000Z'
          readOnly: true
        updated_at:
          type: string
          format: date-time
          example: '2025-04-10T10:14:29.259065000Z'
          readOnly: true
        label:
          type: string
          example: Verifactu A/1
        has_errors:
          type: boolean
          example: false
          description: Indicates if there are any errors in the report.
          readOnly: true
        has_warnings:
          type: boolean
          nullable: true
          description: Indicates if there are any warnings in the report.
          readOnly: true
        from_net:
          type: string
          nullable: true
          readOnly: true
        from_net_id:
          type: string
          nullable: true
          readOnly: true
        to_net:
          type: string
          example: b2brouter
          readOnly: true
        to_net_id:
          type: string
          example: A-TGEZLKMKVK9VVN
          readOnly: true
        ledger_id:
          type: integer
          example: 1096
          description: |
            An internal identifier that is unique to each **Ledger** within B2Brouter.
          readOnly: true
        tax_report_setting_id:
          type: integer
          example: 624
        document_type_code:
          type: string
          example: xml.tax_report.verifactu.alta
        transport_type_code:
          type: string
          example: es.verifactu
        annulled_by_id:
          type: integer
          nullable: true
        generation_timestamp:
          type: string
          format: date-time
          example: '2025-04-10T10:14:25.337580000Z'
        tax_point_date:
          type: string
          nullable: true
        chained_at:
          type: string
          nullable: true
        invoice_date:
          type: string
          format: date
          example: '2025-04-10'
        invoice_number:
          type: string
          example: '111234126332'
        invoice_series_code:
          type: string
          nullable: true
        fiscal_year:
          type: integer
          nullable: true
        fiscal_period:
          type: integer
          nullable: true
        amended_number:
          type: string
          nullable: true
        amended_series_code:
          type: string
          nullable: true
        amended_date:
          type: string
          nullable: true
        amended_line_extension:
          type: number
          format: decimal
          nullable: true
        amended_tax_amount:
          type: number
          format: decimal
          nullable: true
        amended_tax_exclusive:
          type: number
          format: decimal
          nullable: true
        amended_tax_inclusive:
          type: number
          format: decimal
          nullable: true
        amended_charge_total:
          type: number
          format: decimal
          nullable: true
        amended_payable:
          type: number
          format: decimal
          nullable: true
        amended_tax_amount_equivalence_surcharge:
          type: number
          format: decimal
          nullable: true
        amend_type:
          type: string
          nullable: true
        invoice_type_code:
          type: string
          example: F1
          description: |
            [Verifactu and TicketBAI codes](https://developer.b2brouter.net/docs/verifactu#invoice-type-codes)
        special_regime_key:
          type: string
          example: '01'
          description: Special regime key. This is only used when creating TicketBAI Tax Reports.
        special_regime_key_additional:
          type: string
          example: '05'
          description: Special regime key additional. This is only used when creating TicketBAI Tax Reports.
        type_operation:
          type: string
          example: services
          description: Type of operation. This is only used when creating TicketBAI Tax Reports.
        operation_type:
          type: string
          nullable: true
        external_reference:
          type: string
          nullable: true
        description:
          type: string
          example: Factura 111234126332
        annullation:
          type: boolean
          example: false
          default: false
        correction:
          type: boolean
          example: false
        ticket:
          type: boolean
          example: false
        issued_by_third_party_or_receiver:
          type: boolean
          example: false
        customer_party_name:
          type: string
          example: Ingent Grup Systems, SL
        customer_party_id:
          type: string
          nullable: true
        customer_party_scheme:
          type: string
          nullable: true
        customer_party_tax_id:
          type: string
          example: B63354243
        customer_party_tax_scheme:
          type: string
          nullable: true
        customer_party_country:
          type: string
          example: es
        customer_party_postalcode:
          type: string
          example: '08080'
          description: Customer party postal code. This is only used when creating TicketBAI Tax Reports.
        customer_party_address:
          type: string
          example: casa seva, 9
          description: Customer party address. This is only used when creating TicketBAI Tax Reports.
        customer_party_endpoint_id:
          type: string
          nullable: true
        supplier_party_name:
          type: string
          example: B2Brouter Global S.L.
          readOnly: true
        supplier_party_id:
          type: string
          nullable: true
          readOnly: true
        supplier_party_scheme:
          type: string
          nullable: true
          readOnly: true
        supplier_party_tax_id:
          type: string
          example: B63276174
          readOnly: true
        supplier_party_tax_scheme:
          type: string
          nullable: true
          readOnly: true
        supplier_party_country:
          type: string
          nullable: true
          readOnly: true
        supplier_party_endpoint_id:
          type: string
          nullable: true
          readOnly: true
        third_party_name:
          type: string
          nullable: true
          readOnly: true
        third_party_id:
          type: string
          nullable: true
          readOnly: true
        third_party_scheme:
          type: string
          nullable: true
          readOnly: true
        third_party_tax_id:
          type: string
          nullable: true
          readOnly: true
        third_party_tax_scheme:
          type: string
          nullable: true
          readOnly: true
        third_party_country:
          type: string
          nullable: true
          readOnly: true
        third_party_endpoint_id:
          type: string
          nullable: true
          readOnly: true
        line_extension_amount:
          type: number
          format: decimal
          nullable: true
        tax_amount:
          type: number
          format: decimal
          example: 2583
        tax_amount_withheld:
          type: number
          format: decimal
          example: 10
          description: Tax amount withheld. This is only used when creating TicketBAI Tax Reports.
        tax_exclusive_amount:
          type: number
          format: decimal
          nullable: true
        tax_inclusive_amount:
          type: number
          format: decimal
          example: 14883
        charge_total:
          type: number
          format: decimal
          nullable: true
        payable_amount:
          type: number
          format: decimal
          nullable: true
        tax_amount_equivalence_surcharge:
          type: number
          format: decimal
          nullable: true
        currency:
          type: string
          example: EUR
        original_currency:
          type: string
          example: EUR
        previously_refused:
          type: string
          example: S
          description: Specific of Verifactu
        simplified_art7273:
          type: string
          example: S
          description: Specific of Verifactu
        macrodata:
          type: string
          example: 'N'
          description: Specific of Verifactu
        coupon:
          type: string
          example: 'N'
          description: Specific of Verifactu
        tax_breakdowns:
          type: array
          description: One or more tax breakdowns ("Desglose IVA" in Verifactu)
          items:
            $ref: '#/components/schemas/TaxBreakdowns'
        tax_report_lines:
          type: array
          description: One or more tax report lines. This is only used when creating TicketBAI Tax Reports.
          items:
            $ref: '#/components/schemas/TaxReportLine'
    ExternalCompanyTransportProperties:
      properties:
        transport_type_code:
          $ref: '#/components/schemas/TransportTypeCode'
        document_type_code:
          $ref: '#/components/schemas/DocumentTypeCode'
        other_document_type_codes:
          type: array
          description: Other document types that the Company can receive
          items:
            type: string
    DirectoryOrgUnits:
      type: object
      description: Organizational unit or Office that belongs to Company
      properties:
        name:
          type: string
          example: Ayuntamiento de Madrid
          description: The name of the office.
        address:
          type: string
          example: CALLE MONTALBAN, 1
          description: Office address.
          nullable: true
        address2:
          type: string
          example: CALLE MONTALBAN, 1
          description: Office additional address.
          nullable: true
        city:
          type: string
          example: Madrid
          description: City name.
        postalcode:
          type: string
          example: '28014'
          description: Postal code. Zip code for USA and Canada
        province:
          type: string
          example: Madrid
        country:
          type: string
          example: es
          description: Country name to which the office belongs.
        routing_codes:
          type: object
          description: Routing codes for the office Company
          properties:
            cin1_scheme:
              type: string
              nullable: true
              example: '9920'
            cin1_value:
              type: string
              nullable: true
              example: '12345678'
            cin2_scheme:
              type: string
              nullable: true
              example: '9920'
            cin2_value:
              type: string
              nullable: true
              example: '12345678'
            cin3_scheme:
              type: string
              nullable: true
              example: '9920'
            cin3_value:
              type: string
              nullable: true
              example: '12345678'
            cin4_scheme:
              type: string
              nullable: true
              example: '9920'
            cin4_value:
              type: string
              nullable: true
              example: '12345678'
            cin5_scheme:
              type: string
              nullable: true
              example: '9920'
            cin5_value:
              type: string
              nullable: true
              example: '12345678'
        required_fields:
          type: array
          description: Fields that are required for the invoice to send to the Company
          items:
            type: string
            example: cin1_scheme
    ExternalCompany:
      type: object
      description: Company from Directory
      properties:
        name:
          type: string
          example: Ayuntamiento de Madrid
          description: The name of the company.
        email:
          type: string
          example: info@madrid.es
          description: The email of the company.
        website:
          type: string
          example: www.madrid.es
          description: Website address
        address:
          type: string
          example: CALLE MONTALBAN, 1
          description: Company address.
          nullable: true
        address2:
          type: string
          example: CALLE MONTALBAN, 1
          description: Company additional address.
        city:
          type: string
          example: Madrid
          description: City name.
        postalcode:
          type: string
          example: '28014'
          description: Postal code. Zip code for USA and Canada
        province:
          type: string
          example: Madrid
        country:
          type: string
          example: es
          description: Country name to which the company belongs.
        language:
          type: string
          example: es
          maxLength: 2
          description: Contact language.
        currency:
          type: string
          example: EUR
        tin_scheme:
          type: string
          example: '9920'
          description: Scheme for the Tax Identification Number
        tin_value:
          type: string
          example: ESP2807900B
          description: Tax Identification Number
        cin_scheme:
          type: string
          example: '9920'
          description: Scheme for the Company Identification Number
          nullable: true
        cin_value:
          type: string
          example: ESP2807900B
          description: Company Identification Number
          nullable: true
        pin_scheme:
          type: string
          example: '9920'
          description: Scheme for the Peppol Identification Number
          nullable: true
        pin_value:
          type: string
          example: ESP2807900B
          description: Peppol Identification Number
          nullable: true
        invoice:
          type: object
          description: Defines the transport type and document type for sending invoices to the Company
          properties:
            transport_type_code:
              type: string
              example: peppol
              description: Transport type code defined for the Company
            document_type_code:
              type: string
              example: xml.ubl.invoice.bis3
              description: Document type code defined for the Company
            other_document_type_codes:
              type: array
              items:
                type: string
                example: xml.ubl.invoice.pint.billing.aunz.v1
        credit_note:
          allOf:
            - type: object
            - description: Defines the transport type and document type for sending credit notes to the Company
            - $ref: '#/components/schemas/ExternalCompanyTransportProperties'
        application_response:
          allOf:
            - type: object
            - description: Defines the transport type and document type for sending application responses to the Company
            - $ref: '#/components/schemas/ExternalCompanyTransportProperties'
        order:
          allOf:
            - type: object
            - description: Defines the transport type and document type for sending orders to the Company
            - $ref: '#/components/schemas/ExternalCompanyTransportProperties'
        order_response:
          allOf:
            - type: object
            - description: Defines the transport type and document type for sending order responses to the Company
            - $ref: '#/components/schemas/ExternalCompanyTransportProperties'
        despatch_advice:
          allOf:
            - type: object
            - description: Defines the transport type and document type for sending despatch advices to the Company
            - $ref: '#/components/schemas/ExternalCompanyTransportProperties'
        despatch_advice_response:
          allOf:
            - type: object
            - description: Defines the transport type and document type for sending despatch advice responses to the Company
            - $ref: '#/components/schemas/ExternalCompanyTransportProperties'
        information_notes:
          type: object
          description: Information notes, can be shown in different languages
          properties:
            language:
              type: string
              description: The content of the information note on the where language is the key
        routing_codes:
          type: object
          description: Routing codes for the parent Company
          properties:
            cin1_scheme:
              type: string
              nullable: true
              example: '9920'
            cin1_value:
              type: string
              nullable: true
              example: '12345678'
            cin2_scheme:
              type: string
              nullable: true
              example: '9920'
            cin2_value:
              type: string
              nullable: true
              example: '12345678'
            cin3_scheme:
              type: string
              nullable: true
              example: '9920'
            cin3_value:
              type: string
              nullable: true
              example: '12345678'
            cin4_scheme:
              type: string
              nullable: true
              example: '9920'
            cin4_value:
              type: string
              nullable: true
              example: '12345678'
            cin5_scheme:
              type: string
              nullable: true
              example: '9920'
            cin5_value:
              type: string
              nullable: true
              example: '12345678'
        required_fields:
          type: array
          description: Fields that are required for the invoice to send to the Company
          items:
            type: string
            example: cin1_scheme
        organizational_units:
          type: array
          description: Organizational units or Offices that Company has.
          items:
            $ref: '#/components/schemas/DirectoryOrgUnits'
  responses:
    BadRequest:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UnauthorizedError'
    NotFound:
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    UnprocessableEntity:
      description: Unprocessable Entity
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
